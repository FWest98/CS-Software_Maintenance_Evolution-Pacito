Pattern changes caused by commit: 95809de5861b48eb6323381fa0756084fbb2ceeb

From: Abstract Factory-3
To:   Abstract Factory-2

From: Factory Method-3
To:   Factory Method-2


=========================
       NEW GIT LOG
=========================

This commit refers to file: VALID-3667.txt 

commit 95809de5861b48eb6323381fa0756084fbb2ceeb
Author: Jonathan Ellis <jbellis@apache.org>

    snapshot must be performed before flushlock must be acquired, or we deadlock.  See #2381
    patch by jbellis
