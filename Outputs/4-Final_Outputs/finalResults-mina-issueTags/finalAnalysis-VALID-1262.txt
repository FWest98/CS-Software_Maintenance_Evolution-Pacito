Pattern changes caused by commit: 31b6a0d174bfd82406b9706789ae9d00d8a3f737

From: Proxy-1
To:   Proxy-0

From: Strategy-7
To:   Strategy-6


=========================
       NEW GIT LOG
=========================

This commit refers to file: VALID-1262.txt 

commit 31b6a0d174bfd82406b9706789ae9d00d8a3f737
Author: Maarten Bosteels <maarten@apache.org>

    fixed DIRMINA-510 : Spring version of chat example breaks + added junit test



==================================
 Issue DIRMINA-510 Description 
=======================================

Project: MINA
-----------------

-----------------
Title: [DIRMINA-510] Spring version of chat example breaks
-----------------

-----------------
Summary: Spring version of chat example breaks
-----------------

-----------------
Issue type: Bug
-----------------

-----------------
Current status: Closed
-----------------

-----------------
Created at: Thu, 10 Jan 2008 21:36:34 +0000
-----------------

-----------------
Resolved at: Fri, 11 Jan 2008 22:42:31 +0000
-----------------

-----------------
Assigned to: Maarten Bosteels
-----------------

-----------------
Description: 

org.apache.mina.example.chat.SpringMain because of ClassNotFoundException

Exception in
thread "main" org.springframework.beans.factory.CannotLoadBeanClassException: Cannot find
class <span
class="error">&#91;org.apache.mina.integration.spring.ssl.KeyStoreFactoryBean&#93;</span>
for bean with name 'keyStore' defined in class path resource <span
class="error">&#91;org/apache/mina/example/chat/serverContext.xml&#93;</span>; nested
exception is java.lang.ClassNotFoundException<br/>...

see <a
href="http://www.nabble.com/Spring-related-mina-example-code-breaks-to14735748s16868.html"
class="external-link"
rel="nofollow">http://www.nabble.com/Spring-related-mina-example-code-breaks-to14735748s16868.html</a>
 

-----------------

-----------------
Comments: 

New Comment: 
&lt;QUOTE&gt;<br/>Has anybody noticed that the Spring version of chat example breaks?
The<br/>trouble maker
is<br/>mina-examples/src/main/resources/org/apache/mina/example/chat/serverContext.xml,<br/>in
which there is still classes already removed from trunk long ago, such<br/>as:<ul
class="alternate"
type="square">	<li>org.apache.mina.integration.spring.ssl.KeyStoreFactoryBean</li>	<li>org.apache.mina.integration.spring.ssl.BogusTrustManagerFactory</li>	<li>org.apache.mina.integration.spring.ssl.SslContextFactoryBean</li>	<li>org.apache.mina.integration.spring.DefaultIoFilterChainBuilderFactoryBean<br/>&lt;/QUOTE&gt;</li></ul>The
three first missing classes now live in org.apache.mina.filter.ssl. The last one should be
replaced with org.apache.mina.common.DefaultIoFilterChainBuilder directly because it now
has the setFilters() method. 


New Comment: 
Suppose you have this bean definition:&lt;bean id="keyStoreFactory"
class="o.a.m.filter.ssl.KeyStoreFactory"&gt;<br/> &lt;property name="data"
value="classpath:/serverContext.xml"/&gt;<br/>&lt;/bean&gt;Problem is that KeyStoreFactory
has several overloaded setData() methods and it's unpredictable which one Spring is gonna
call.I suggest to rename the overloaded setData methods to setDataUrl(), setDataFile(),
and setDataInputStream()<br/>Not sure if the last one needs to be public ?Objections
anyone ? 


New Comment: 
I have no objections to rename the methods.The important thing is that KeyStoreFactory
will play nicely with Spring's Resources. Before when we had KeyStoreFactoryBean I think
you would pass a Resource object which meant that you could e.g. load stuff from your
webapp's context and use context relative URL in a web environment. That's very convenient
but I'm not sure that we would get that same support now when KeyStoreFactory cannot
depend on Spring anymore.Question is will Spring create a nice URL for you in your example
and use the current ResourceLoader to resolve the URL? 


New Comment: 
&gt; Question is will Spring create a nice URL for you in your example and use the current
ResourceLoader to resolve the URL?Spring was able to resolve the
"classpath:/serverContext.xml" so I guess it's using the current ResourceLoader <br/>(and
converting the string value to a URL using an implicitly available ResourceEditor)It took
me a while to find out all the changes I had to make to serverContext.xml and I wondered: 
is it really that important to get rid of the Spring dependency ?IMO the
KeyStoreFactoryBean with an org.springframework.core.io.Resource property was more
convenient than what we have now.<br/>At least for Spring users.<a
href="http://mina.apache.org/report/1.1/apidocs/org/apache/mina/integration/spring/ssl/KeyStoreFactoryBean.html"
class="external-link"
rel="nofollow">http://mina.apache.org/report/1.1/apidocs/org/apache/mina/integration/spring/ssl/KeyStoreFactoryBean.html</a> 


New Comment: 
Actually, I would agree. I think the ssl FactoryBeans were quite handy and what we have
now in filter.ssl isn't as convenient. I wouldn't mind it if the ssl FactoryBeans were
resurrected. 


