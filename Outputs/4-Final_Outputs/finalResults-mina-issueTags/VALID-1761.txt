Pattern changes caused by commit: 5e9c2b3370c1aba21466a274ce1b90d797766db2

From: Facade-4
To:   Facade-3


=========================
       NEW GIT LOG
=========================

This commit refers to file: VALID-1761.txt 

commit 5e9c2b3370c1aba21466a274ce1b90d797766db2
Author: Emmanuel Lecharny <elecharny@apache.org>

    Fix for DIRMINA-739



==================================
 Issue DIRMINA-739 Description 
=======================================

Project: MINA
-----------------

-----------------
Title: [DIRMINA-739] IllegalArgumentException thrown from ErrorGeneratingFilter
-----------------

-----------------
Summary: IllegalArgumentException thrown from ErrorGeneratingFilter
-----------------

-----------------
Issue type: Bug
-----------------

-----------------
Current status: Closed
-----------------

-----------------
Created at: Tue, 1 Sep 2009 09:18:28 +0000
-----------------

-----------------
Resolved at: Tue, 1 Sep 2009 10:08:56 +0000
-----------------

-----------------
Assigned to: Emmanuel LÃ©charny
-----------------

-----------------
Description: 

I've configured an
ErrorGeneratingFilter in my tests and am
now occasionally seeing the following
exception:
<div class="code panel"
style="border-width: 1px;"><div
class="codeContent panelContent"><pre
class="code-java">Caused by:
java.lang.IllegalArgumentException: n
must be positive	at
java.util.Random.nextInt(Random.java:250)	at
org.apache.mina.filter.errorgenerating.ErrorGeneratingFilter.manipulateIoBuffer(ErrorGeneratingFilter.java:187)	at
org.apache.mina.filter.errorgenerating.ErrorGeneratingFilter.messageReceived(ErrorGeneratingFilter.java:118)	at
org.apache.mina.core.filterchain.DefaultIoFilterChain.callNextMessageReceived(DefaultIoFilterChain.java:433)</pre></div></div>
Obviously
buffer.remaining() is returning 0
here.

How about the following fix?
<div
class="code panel" style="border-width:
1px;"><div class="codeContent
panelContent"><pre
class="code-java"><span
class="code-keyword">if</span>
(buffer.remaining() &gt; 0 &amp;&amp;
changeByteProbability &gt;
rng.nextInt(1000)) {	<span
class="code-comment">// as
before</span>}</pre></div></div> 
