Pattern changes caused by commit: 977e48294b5ecad5a9ead1963a6349f75f5b33ca

From: Abstract Factory-2
To:   Abstract Factory-3

From: Factory Method-2
To:   Factory Method-3

From: Mediator-1
To:   Mediator-2


=========================
       NEW GIT LOG
=========================

This commit refers to file: VALID-3792.txt 

commit 977e48294b5ecad5a9ead1963a6349f75f5b33ca
Author: Jonathan Ellis <jbellis@apache.org>

    fix schema compatibility w/ 0.7
    patch by jbellis; reviewed by gdusbabek for CASSANDRA-2450



==================================
 Issue CASSANDRA-2450 Description 
=======================================

Project: Cassandra
-----------------

-----------------
Title: [CASSANDRA-2450] incompatibility w/ 0.7 schemas
-----------------

-----------------
Summary: incompatibility w/ 0.7 schemas
-----------------

-----------------
Issue type: Bug
-----------------

-----------------
Current status: Resolved
-----------------

-----------------
Created at: Mon, 11 Apr 2011 19:32:53 +0000
-----------------

-----------------
Resolved at: Fri, 15 Apr 2011 14:38:15 +0000
-----------------

-----------------
Assigned to: Jonathan Ellis
-----------------

-----------------
Description: 

If you create a SimpleStrategy keyspace under 0.7, then switch to 0.8, you will get this
error on startup:
<div class="preformatted panel" style="border-width: 1px;"><div
class="preformattedContent panelContent"><pre>ERROR 14:31:41,725 Exception encountered
during startup.java.lang.RuntimeException:
org.apache.cassandra.config.ConfigurationException: SimpleStrategy requires a
replication_factor strategy option.	at
org.apache.cassandra.db.Table.&lt;init&gt;(Table.java:277)	at
org.apache.cassandra.db.Table.open(Table.java:109)	at
org.apache.cassandra.service.AbstractCassandraDaemon.setup(AbstractCassandraDaemon.java:160)	at
org.apache.cassandra.service.AbstractCassandraDaemon.activate(AbstractCassandraDaemon.java:314)	at
org.apache.cassandra.thrift.CassandraDaemon.main(CassandraDaemon.java:80)Caused by:
org.apache.cassandra.config.ConfigurationException: SimpleStrategy requires a
replication_factor strategy option.	at
org.apache.cassandra.locator.SimpleStrategy.validateOptions(SimpleStrategy.java:75)	at
org.apache.cassandra.locator.AbstractReplicationStrategy.createReplicationStrategy(AbstractReplicationStrategy.java:262)	at
org.apache.cassandra.db.Table.createReplicationStrategy(Table.java:327)	at
org.apache.cassandra.db.Table.&lt;init&gt;(Table.java:273)	... 4 more</pre></div></div> 

-----------------

-----------------
Comments: 

New Comment: 
patch add back replication_factor to the avro class as union { int, null } so we can
upgrade old-style schema information seamlessly in KSMetaData. 


New Comment: 
+1 


