Pattern changes caused by commit: 29379a525420147203777a403f7675232f927a53

From: Decorator-2
To:   Decorator-1

From: Flyweight-2
To:   Flyweight-1

From: Mediator-3
To:   Mediator-1

From: Strategy-0
To:   Strategy-1

From: Template Method-3
To:   Template Method-2


=========================
       NEW GIT LOG
=========================

This commit refers to file: VALID-7177.txt 

commit 29379a525420147203777a403f7675232f927a53
Author: Brandon Williams <brandonwilliams@apache.org>

    Fix startup script return code.
    Patch by paul cannon, reviewed by brandonwilliams for CASSANDRA-4271



==================================
 Issue CASSANDRA-4271 Description 
=======================================

Project: Cassandra
-----------------

-----------------
Title: [CASSANDRA-4271] Exit status of bin/cassandra without -f is wrong
-----------------

-----------------
Summary: Exit status of bin/cassandra without -f is wrong
-----------------

-----------------
Issue type: Bug
-----------------

-----------------
Current status: Resolved
-----------------

-----------------
Created at: Tue, 22 May 2012 01:27:50 +0000
-----------------

-----------------
Resolved at: Mon, 23 Jul 2012 16:46:51 +0000
-----------------

-----------------
Assigned to: paul cannon
-----------------

-----------------
Description: 

The launch_service() function returns <tt>$?</tt> after exec'ing java, and the script
then exits with that same status.

The problem is that we do a <tt>[ ! -z "$pidpath"]
&amp;&amp; ...</tt> conditional statment after exec'ing when the foreground flag isn't
set.  The value of <tt>$?</tt> then depends on that conditional and the statement,
typically returning 1, because <tt>$pidpath</tt> isn't set.  So, even if everything
appears to execute normally, you will get an exit status of 1 for the whole script.

I
suspect the right thing to do is just return 0 when backgrounding.
 

-----------------

-----------------
Comments: 

New Comment: 
Patch attached; also present in the 4271 branch in my github. Current version tagged
pending/4271.<a href="https://github.com/thepaul/cassandra/tree/4271"
class="external-link" rel="nofollow">https://github.com/thepaul/cassandra/tree/4271</a> 


