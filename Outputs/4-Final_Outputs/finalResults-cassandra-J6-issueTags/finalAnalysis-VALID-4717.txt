Pattern changes caused by commit: 0b31efe2964fc6ca6dbfb581fe451189e471ad94

From: Decorator-1
To:   Decorator-0

From: Mediator-3
To:   Mediator-1


=========================
       NEW GIT LOG
=========================

This commit refers to file: VALID-4717.txt 

commit 0b31efe2964fc6ca6dbfb581fe451189e471ad94
Author: Jonathan Ellis <jbellis@apache.org>

    fix UnavailableException with writes at CL.EACH_QUORM
    patch by Patricio Echague; reviewed by jbellis for CASSANDRA-3082



==================================
 Issue CASSANDRA-3082 Description 
=======================================

Project: Cassandra
-----------------

-----------------
Title: [CASSANDRA-3082] Operation with CL=EACH_QUORUM doesn't succeed when a replica is down (RF=3)
-----------------

-----------------
Summary: Operation with CL=EACH_QUORUM doesn't succeed when a replica is down (RF=3)
-----------------

-----------------
Issue type: Bug
-----------------

-----------------
Current status: Resolved
-----------------

-----------------
Created at: Fri, 26 Aug 2011 16:17:15 +0000
-----------------

-----------------
Resolved at: Fri, 26 Aug 2011 21:06:45 +0000
-----------------

-----------------
Assigned to: Patricio Echague
-----------------

-----------------
Description: 
<div class="code panel" style="border-width: 1px;"><div class="codeContent
panelContent"><pre class="code-java"> 
DatacenterSyncWriteResponseHandler#assureSufficientLiveNodes()     ...     ...       
<span class="code-comment">// Throw exception <span class="code-keyword">if</span> any of
the DC doesn't have livenodes to accept write.</span>        <span
class="code-keyword">for</span> (<span class="code-object">String</span> dc:
strategy.getDatacenters())        {        	<span class="code-keyword">if</span>
(dcEndpoints.get(dc).get() != responses.get(dc).get())                <span
class="code-keyword">throw</span> <span class="code-keyword">new</span>
UnavailableException();        }</pre></div></div>
should be:
<div class="code panel"
style="border-width: 1px;"><div class="codeContent panelContent"><pre class="code-java">  
   <span class="code-keyword">if</span> (dcEndpoints.get(dc).get() &lt;
responses.get(dc).get())</pre></div></div> 

-----------------

-----------------
Comments: 

New Comment: 
It passed a manual test using CCM with 6 nodes.DC1:3<br/>DC2:3Originally, with all
replicas up and running, the insert with CL=EACH_QUORUM failed.The patch addresses that
issue. 


New Comment: 
committed 


