Pattern changes caused by commit: 7cbc0be23d258559aa823cd9fa8586ff81f71c91

From: Decorator-2
To:   Decorator-1

From: Flyweight-2
To:   Flyweight-1

From: Mediator-3
To:   Mediator-1

From: Strategy-0
To:   Strategy-1


=========================
       NEW GIT LOG
=========================

This commit refers to file: VALID-7423.txt 

commit 7cbc0be23d258559aa823cd9fa8586ff81f71c91
Author: Brandon Williams <brandonwilliams@apache.org>

    cqlsh: allow disabling colors.
    Patch by Tyler Hobbs, reviewed by brandonwilliams for CASSANDRA-4634



==================================
 Issue CASSANDRA-4634 Description 
=======================================

Project: Cassandra
-----------------

-----------------
Title: [CASSANDRA-4634] cqlsh --color option doesn't allow you to disable colors
-----------------

-----------------
Summary: cqlsh --color option doesn't allow you to disable colors
-----------------

-----------------
Issue type: Bug
-----------------

-----------------
Current status: Resolved
-----------------

-----------------
Created at: Sat, 8 Sep 2012 21:53:05 +0000
-----------------

-----------------
Resolved at: Mon, 10 Sep 2012 20:07:42 +0000
-----------------

-----------------
Assigned to: Tom Hobbs
-----------------

-----------------
Description: 

There's no way to disable colors with cqlsh, despite it having a <tt>--color</tt> option,
because that option can only enable color if present, not disable it, and the default is
that color is enabled.

(Incidentally, if the <tt>--file</tt> option is used, it will
disable color.)
 

-----------------

-----------------
Comments: 

New Comment: 
Attached patch changes the color option to accept a choice of <tt>always</tt>,
<tt>never</tt>, or <tt>auto</tt>, defaulting to <tt>auto</tt>, which uses colors if not
reading from a file and stdout is connected to a terminal (at least as well as we can
detect that).  I based the options off of <tt>ls</tt> and <tt>grep</tt>, which use the
same format. 


New Comment: 
Since I'm not a particular fan of ls/grep's command-line color control (too much typing
for cases which are fairly common) and since this isn't backwards compatible (using
<tt>&#45;-color</tt> alone will give an error), I'm inclined to vote -1 on it. Can we just
add a <tt>&#45;-no-color</tt> option to force color off for the people who don't want to
do <tt>TERM=dumb</tt> or <tt>cqlsh | cat</tt> or something? 


New Comment: 
I don't have any problem with ls/grep's command-line color control but I would tend to
agree that it's probably not worth breaking any backward compatibility and a --no-color
would be good enough. I don't care much about the matter though, just my 2 cents. 


New Comment: 
v2 patch adds a <tt>&#45;&#45;no-color</tt> option instead.  The behavior now is that with
<tt>&#45;&#45;color</tt>, color will always be enabled, with <tt>&#45;&#45;no-color</tt>,
it will always be disabled, and without either one, the behavior is similar to
<tt>auto</tt>, where color is only enabled if not reading a file and stdout is connected
to a terminal. 


New Comment: 
+1 


