Pattern changes caused by commit: f481a39167086ee4958d88b49e87ade091d4d858

From: Abstract Factory-1
To:   Abstract Factory-2

From: Factory Method-1
To:   Factory Method-2

From: Decorator-2
To:   Decorator-1

From: Facade-0
To:   Facade-1

From: Flyweight-2
To:   Flyweight-1

From: Mediator-3
To:   Mediator-1

From: Strategy-0
To:   Strategy-1


=========================
       NEW GIT LOG
=========================

This commit refers to file: VALID-8411.txt 

commit f481a39167086ee4958d88b49e87ade091d4d858
Author: Yuki Morishita <yukim@apache.org>

    Fix user defined compaction; patch by yukim reviewed by jbellis for CASSANDRA-5118



==================================
 Issue CASSANDRA-5118 Description 
=======================================

Project: Cassandra
-----------------

-----------------
Title: [CASSANDRA-5118] user defined compaction is broken
-----------------

-----------------
Summary: user defined compaction is broken
-----------------

-----------------
Issue type: Bug
-----------------

-----------------
Current status: Resolved
-----------------

-----------------
Created at: Sat, 5 Jan 2013 01:05:40 +0000
-----------------

-----------------
Resolved at: Thu, 10 Jan 2013 17:58:37 +0000
-----------------

-----------------
Assigned to: Yuki Morishita
-----------------

-----------------
Description: 

currently forceUserDefinedCompaction takes (keyspace, datafile)

cassandra tries to look
for ks/ks-cf-hf-80-Data.db when the sstable actually exists at
ks/cf/ks-cf-hf-80-Data.db

fix would be for user defined compaction to look for the
sstable datafile in the correct location
 

-----------------

-----------------
Comments: 

New Comment: 
Looks like user defined compaction has not been working since data directory structure
change in 1.1.<br/>Patch fixes this by pointing proper directory based on given file
names. 


New Comment: 
+1 verified this patch works against 1.2.0 


New Comment: 
LGTM.  Can you also add a quick test for forceUserDefinedCompaction to catch this
regression?Also created <a href="https://issues.apache.org/jira/browse/CASSANDRA-5139"
title="Drop keyspace argument from forceUserDefinedCompactions" class="issue-link"
data-issue-key="CASSANDRA-5139"><del>CASSANDRA-5139</del></a> for followup. 


New Comment: 
Committed with the test added to CompactionsTest. 


