Pattern changes caused by commit: 12074044273f40e5f0a448792e3678a9f99bdb07

From: Abstract Factory-3
To:   Abstract Factory-2

From: Factory Method-3
To:   Factory Method-2


=========================
       NEW GIT LOG
=========================

This commit refers to file: VALID-3367.txt 

commit 12074044273f40e5f0a448792e3678a9f99bdb07
Author: Jonathan Ellis <jbellis@apache.org>

    fix "ant codecoverage"
    patch by Stephen Connolly; tested by jbellis for CASSANDRA-2243



==================================
 Issue CASSANDRA-2243 Description 
=======================================

Project: Cassandra
-----------------

-----------------
Title: [CASSANDRA-2243] fix "ant codecoverage"
-----------------

-----------------
Summary: fix "ant codecoverage"
-----------------

-----------------
Issue type: Bug
-----------------

-----------------
Current status: Resolved
-----------------

-----------------
Created at: Thu, 24 Feb 2011 19:05:52 +0000
-----------------

-----------------
Resolved at: Sun, 27 Feb 2011 02:42:10 +0000
-----------------

-----------------
Assigned to: Stephen Connolly
-----------------

-----------------
Description: 
 

-----------------

-----------------
Comments: 

New Comment: 
attached patch fixes cobertura code coverage and leverages the maven local repo to avoid
having to specify cobertura jar location via a system property and also avoid shipping the
GPL artifact (i.e. cobertura.jar) in the Apache distribution 


New Comment: 
hmmm the whole way cobertura instrumentation had been implemented is a little messy and
with this fix I have concerns about GPL leaking as cobertura is always on the classpath
even for non-instrumented tests. I think the testmacro needs to be tweaked 


New Comment: 
OK, here is my concern.Prior to this fix, the codecoverage target would only work if you
ran something likeant codecoverage -Dcobertura.dir=/path/to/cobertura.jarif you just ran
ant codecoveragethen it would fail.The reasoning behind the above is to ensure that
cobertura.jar is never bundled in the -bin.tar.gz or -src.tar.gz that we ship (due to
cobertura.jar having GPL code)With this patch, we never have the risk of bundling
cobertura.jar as it remains safely in ~/.m2/repository/net/sourceforge/cobertura/... and
never comes near the build directory...However there is a side-effect, namely now the ant
target "test" will always run with cobertura.jar on the classpath.This should be minimal
risk, as you are not bundling the test classpath, but it is up to the Cassandra PMC to
decide on that risk as the Cassandra PMC has to approve the releases 


New Comment: 
committed, thanks! 


