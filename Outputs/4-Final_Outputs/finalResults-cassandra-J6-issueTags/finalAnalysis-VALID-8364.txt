Pattern changes caused by commit: 3034eeecbfd2680556378fec64b73d190908c01b

From: Abstract Factory-1
To:   Abstract Factory-2

From: Factory Method-1
To:   Factory Method-2

From: Decorator-2
To:   Decorator-1

From: Facade-0
To:   Facade-1

From: Flyweight-2
To:   Flyweight-1

From: Mediator-3
To:   Mediator-1

From: Strategy-0
To:   Strategy-1


=========================
       NEW GIT LOG
=========================

This commit refers to file: VALID-8364.txt 

commit 3034eeecbfd2680556378fec64b73d190908c01b
Author: Brandon Williams <brandonwilliams@apache.org>

    Correctly decode row keys in widerow mode.
    Patch by brandonwilliams reviewed by aleksey for CASSANDRA-5098



==================================
 Issue CASSANDRA-5098 Description 
=======================================

Project: Cassandra
-----------------

-----------------
Title: [CASSANDRA-5098] CassandraStorage doesn't decode name in widerow mode
-----------------

-----------------
Summary: CassandraStorage doesn't decode name in widerow mode
-----------------

-----------------
Issue type: Bug
-----------------

-----------------
Current status: Resolved
-----------------

-----------------
Created at: Wed, 2 Jan 2013 17:08:07 +0000
-----------------

-----------------
Resolved at: Fri, 4 Jan 2013 17:13:14 +0000
-----------------

-----------------
Assigned to: Brandon Williams
-----------------

-----------------
Description: 

CassandraStorage doesn't decode name in widerow mode. This causes functions such as
FILTER to fail with a ClassCastException, since the key is a bytearray instead of a
chararray.
<div class="code panel" style="border-width: 1px;"><div class="codeHeader
panelHeader" style="border-bottom-width: 1px;"><b>test.pig</b></div><div
class="codeContent panelContent"><pre class="code-java">DEFINE CassandraStorage
org.apache.cassandra.hadoop.pig.CassandraStorage;A  = LOAD <span
class="code-quote">'cassandra:<span
class="code-comment">//Metrics/EventEntries?widerows=<span
class="code-keyword">true</span>'</span> USING CassandraStorage();</span>-- describe A
--&gt; A: {key: chararray,columns: {(name: (),value: chararray)}}B = FILTER A BY key
matches <span class="code-quote">'^user.hit'</span>;-- Throws CCE:
org.apache.pig.data.DataByteArray cannot be <span class="code-keyword">cast</span> to
java.lang.<span class="code-object">String</span></pre></div></div> 

-----------------

-----------------
Comments: 

New Comment: 
Add Stack Trace 


New Comment: 
Attach test_schema 


New Comment: 
In widerow mode, we weren't decoding the key since we have to track it to recompose the
row into a bag.  Simple patch to decode the key when we add it to the tuple. 


New Comment: 
+1 


