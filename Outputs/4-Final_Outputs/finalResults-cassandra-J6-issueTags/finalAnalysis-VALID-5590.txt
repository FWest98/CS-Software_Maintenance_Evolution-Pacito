Pattern changes caused by commit: 9b4fbb805646088546ea6996a918f6dc40ad993d

From: Facade-0
To:   Facade-1


=========================
       NEW GIT LOG
=========================

This commit refers to file: VALID-5590.txt 

commit 9b4fbb805646088546ea6996a918f6dc40ad993d
Author: Sylvain Lebresne <slebresne@apache.org>

    Fix assertion error in DK
    patch by slebresne; reviewed by jbellis for CASSANDRA-3574



==================================
 Issue CASSANDRA-3574 Description 
=======================================

Project: Cassandra
-----------------

-----------------
Title: [CASSANDRA-3574] AssertionError in DK
-----------------

-----------------
Summary: AssertionError in DK
-----------------

-----------------
Issue type: Bug
-----------------

-----------------
Current status: Resolved
-----------------

-----------------
Created at: Mon, 5 Dec 2011 22:42:26 +0000
-----------------

-----------------
Resolved at: Tue, 6 Dec 2011 17:08:37 +0000
-----------------

-----------------
Assigned to: Sylvain Lebresne
-----------------

-----------------
Description: 

When running the dtests:
<div class="preformatted panel" style="border-width: 1px;"><div
class="preformattedContent panelContent"><pre>ERROR [pool-2-thread-1] 2011-12-05
16:22:53,940 Cassandra.java (line 4082) Internal error processing
execute_cql_queryjava.lang.AssertionError        at
org.apache.cassandra.db.DecoratedKey.&lt;init&gt;(DecoratedKey.java:56)        at
org.apache.cassandra.dht.RandomPartitioner.decorateKey(RandomPartitioner.java:47)       
at org.apache.cassandra.cql.QueryProcessor.multiRangeSlice(QueryProcessor.java:161)       
at org.apache.cassandra.cql.QueryProcessor.process(QueryProcessor.java:549)        at
org.apache.cassandra.thrift.CassandraServer.execute_cql_query(CassandraServer.java:1249)  
     at
org.apache.cassandra.thrift.Cassandra$Processor$execute_cql_query.process(Cassandra.java:4072)
       at org.apache.cassandra.thrift.Cassandra$Processor.process(Cassandra.java:2889)    
   at
org.apache.cassandra.thrift.CustomTThreadPoolServer$WorkerProcess.run(CustomTThreadPoolServer.java:187)
       at
java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)       
at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)       
at java.lang.Thread.run(Thread.java:662)</pre></div></div>
I suspect <a
href="https://issues.apache.org/jira/browse/CASSANDRA-1034" title="Remove assumption that
Key to Token is one-to-one" class="issue-link"
data-issue-key="CASSANDRA-1034"><del>CASSANDRA-1034</del></a> is to blame.
 

-----------------

-----------------
Comments: 

New Comment: 
I though I had fixed that already but apparently not. Patch attached. 


New Comment: 
+1 


New Comment: 
Committed, thanks 


