Pattern changes caused by commit: cf9a581bf7957d9404a6a5f33f77cf32468c6336

From: Decorator-2
To:   Decorator-1

From: Flyweight-2
To:   Flyweight-1

From: Mediator-3
To:   Mediator-1

From: Strategy-0
To:   Strategy-1

From: Template Method-3
To:   Template Method-2


=========================
       NEW GIT LOG
=========================

This commit refers to file: VALID-6869.txt 

commit cf9a581bf7957d9404a6a5f33f77cf32468c6336
Author: Brandon Williams <brandonwilliams@apache.org>

    Add GossipingPropertyFileSnitch.
    Patch by brandonwilliams reviewed by Vijay for CASSANDRA-1974



==================================
 Issue CASSANDRA-1974 Description 
=======================================

Project: Cassandra
-----------------

-----------------
Title: [CASSANDRA-1974] PFEPS-like snitch that uses gossip instead of a property file
-----------------

-----------------
Summary: PFEPS-like snitch that uses gossip instead of a property file
-----------------

-----------------
Issue type: New Feature
-----------------

-----------------
Current status: Resolved
-----------------

-----------------
Created at: Wed, 12 Jan 2011 19:22:47 +0000
-----------------

-----------------
Resolved at: Fri, 25 May 2012 20:22:24 +0000
-----------------

-----------------
Assigned to: Brandon Williams
-----------------

-----------------
Description: 

Now that we have an ec2 snitch that propagates its rack/dc info via gossip from <a
href="https://issues.apache.org/jira/browse/CASSANDRA-1654" title="EC2Snitch"
class="issue-link" data-issue-key="CASSANDRA-1654"><del>CASSANDRA-1654</del></a>, it
doesn't make a lot of sense to use PFEPS where you have to rsync the property file across
all the machines when you add a node.  Instead, we could have a snitch where you specify
its rack/dc in a property file, and propagate this via gossip like the ec2 snitch.  In
order to not break PFEPS, this should probably be a new snitch.
 

-----------------

-----------------
Comments: 

New Comment: 
Is it really easier to keep 100 separate files correct, than a single one? 


New Comment: 
I think when adding a node it's easier to specify once and then bootstrap rather than
rsync it everywhere.  And you'd only have 100 separate files if you had 100 DCs/racks. 


New Comment: 
I think the biggest win is when you can automatically determine rack/dc from the
environment somehow (e.g.: ec2snitch).  Otherwise the advantage of editing a file, vs edit
+ rsync, is small.  Small enough that it's probably not worth the education headache. 


New Comment: 
For those of us not on ec2, it would be incredibly convenient to have changes to the
topology propagate across the entire cluster instead of maintaining an additional rsync.
+1 


New Comment: 
Adds a GossipingPropertyFileSnitch that enables defining the local node's rack/dc in
cassandra-rackdc.properties and propagating that via gossip, while still utilizing PFS as
a fallback if cassandra-topologies.properties is present, allowing migration from PFS to
GPFS. 


New Comment: 
+1 


