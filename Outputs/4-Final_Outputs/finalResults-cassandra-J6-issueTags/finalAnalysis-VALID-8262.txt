Pattern changes caused by commit: 706612e300ffc039ee35c07601cb60dab0486945

From: Abstract Factory-1
To:   Abstract Factory-2

From: Factory Method-1
To:   Factory Method-2


=========================
       NEW GIT LOG
=========================

This commit refers to file: VALID-8262.txt 

commit 706612e300ffc039ee35c07601cb60dab0486945
Author: Aleksey Yeschenko <aleksey@apache.org>

    Fix SimpleAuthorizer example;
    patch by Aleksey Yeschenko, reviewed by Jonathan Ellis for
    CASSANDRA-5072



==================================
 Issue CASSANDRA-5072 Description 
=======================================

Project: Cassandra
-----------------

-----------------
Title: [CASSANDRA-5072] Bug in creating EnumSet in SimpleAuthorizer example
-----------------

-----------------
Summary: Bug in creating EnumSet in SimpleAuthorizer example
-----------------

-----------------
Issue type: Bug
-----------------

-----------------
Current status: Resolved
-----------------

-----------------
Created at: Sat, 15 Dec 2012 13:24:37 +0000
-----------------

-----------------
Resolved at: Mon, 17 Dec 2012 15:45:17 +0000
-----------------

-----------------
Assigned to: Aleksey Yeschenko
-----------------

-----------------
Description: 

In SimpleAuthorizer around line 47 we have,

EnumSet&lt;Permission&gt; authorized =
EnumSet.copyOf(Permission.NONE);

This results in an IllegalArgumentException since
Permission.NONE is an empty set. I think it should be changed
to,

EnumSet&lt;Permission&gt; authorized = EnumSet.noneOf(Permission.class);
 

-----------------

-----------------
Comments: 

New Comment: 
it used to just return Permission.NONE (1.1), which is an immutable set. doing what this
patch says seems fine to me. 


New Comment: 
It used to return Permission.NONE which used to be a (mutable) EnumSet. In 1.2 it's an
ImmutableSet, as it should be. EnumsSet.copyOf is there to convert it back to EnumSet,
since that's what the old interface requires.I guess we should fix it, even though Simple*
examples will be dropped in 1.2.1 or 1.2.2 entirely (were supposed to be dropped in 1.2.0
actually, which is why there wasn't much testing done with them). 


New Comment: 
Still, there is a reason why they are in 'examples' directory. They are not intended to be
used in production, and now they don't even serve as good IAuthenticator/IAuthorizer
examples - they only showcase LegacyAuthenticator/LegacyAuthorizer classes).Maybe we
should drop'em for 1.2.0 actually. 


New Comment: 
The attached patch updates SimpleAuthorizer. Not sure if the right solution is to fix it
or to drop these examples entirely, but it should be resolved somehow. 


New Comment: 
Let's go ahead and fix it (and drop the examples for 2.0).Patch LGTM. 


