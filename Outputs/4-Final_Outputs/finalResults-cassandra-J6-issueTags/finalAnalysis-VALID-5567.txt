Pattern changes caused by commit: 41ef1b550ac0c3fc94f05cf50afd26f7c64bf4ea

From: Decorator-1
To:   Decorator-0

From: Flyweight-4
To:   Flyweight-5

From: Strategy-1
To:   Strategy-0


=========================
       NEW GIT LOG
=========================

This commit refers to file: VALID-5567.txt 

commit 41ef1b550ac0c3fc94f05cf50afd26f7c64bf4ea
Author: Jonathan Ellis <jbellis@apache.org>

    use cannonical host for local node in nodetool info
    patch by Rick Branson; reviewed by jbellis for CASSANDRA-3556



==================================
 Issue CASSANDRA-3556 Description 
=======================================

Project: Cassandra
-----------------

-----------------
Title: [CASSANDRA-3556] nodetool info reports inaccurate datacenter/rack for localhost
-----------------

-----------------
Summary: nodetool info reports inaccurate datacenter/rack for localhost
-----------------

-----------------
Issue type: Bug
-----------------

-----------------
Current status: Resolved
-----------------

-----------------
Created at: Fri, 2 Dec 2011 08:10:41 +0000
-----------------

-----------------
Resolved at: Fri, 2 Dec 2011 18:10:23 +0000
-----------------

-----------------
Assigned to: Rick Branson
-----------------

-----------------
Description: 

The datacenter &amp; rack information provided by 'nodetool info' is incorrect when using
'nodetool -h localhost info'. This is because the IP address passed to the EndpointSnitch
to determine the datacenter &amp; rack is sourced from the host parameter provided to
nodetool and not the actual endpoint address used in the ring.
 

-----------------

-----------------
Comments: 

New Comment: 
Attached patch resolves the issue by looking up the local endpoint's "real" hostname by
token. 


New Comment: 
"fall back if we can't find it for some reason" is shouldn't-ever-happen territory, right?
 Would prefer to throw assertionerror, if so. 


New Comment: 
betta? <img class="emoticon"
src="https://issues.apache.org/jira/images/icons/emoticons/smile.png" height="16"
width="16" align="absmiddle" alt="" border="0"/> 


New Comment: 
committed 


