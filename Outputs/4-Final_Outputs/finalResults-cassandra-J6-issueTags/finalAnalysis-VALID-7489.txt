Pattern changes caused by commit: b43cc362aa568a46bc53e545c68518b0bd350b76

From: Decorator-2
To:   Decorator-1

From: Flyweight-2
To:   Flyweight-1

From: Mediator-3
To:   Mediator-1

From: Strategy-0
To:   Strategy-1


=========================
       NEW GIT LOG
=========================

This commit refers to file: VALID-7489.txt 

commit b43cc362aa568a46bc53e545c68518b0bd350b76
Author: Brandon Williams <brandonwilliams@apache.org>

    Backport proxyhistograms to 1.1, print zero instead of blank values.
    Patch by Alexey Zotov, reviewed by brandonwilliams for CASSANDRA-4656



==================================
 Issue CASSANDRA-4656 Description 
=======================================

Project: Cassandra
-----------------

-----------------
Title: [CASSANDRA-4656] StorageProxy histograms
-----------------

-----------------
Summary: StorageProxy histograms
-----------------

-----------------
Issue type: Improvement
-----------------

-----------------
Current status: Resolved
-----------------

-----------------
Created at: Wed, 12 Sep 2012 14:12:34 +0000
-----------------

-----------------
Resolved at: Wed, 19 Sep 2012 11:17:38 +0000
-----------------

-----------------
Assigned to: Alexey Zotov
-----------------

-----------------
Description: 

I suggest to do two improvements:<br/>1. StorageProxy histograms need to be added to the
cli. In my opinion that statistic is very important, because it shows real server response
time (with accounting of additional requests to other nodes). It can be usefull for
gathering of the server response time statistics by some monitoring systems (without using
additional JMX modules).

2. Output of 'nodetool cfhistograms' command has an empty values
in 'SSTables' column. Output is not usable for parse because of that. I suggest to insert
'0' instead of empty values.

Old output:
<div class="code panel" style="border-width:
1px;"><div class="codeContent panelContent"><pre class="code-java">Offset      SSTables   
 Write Latency      Read Latency          Row Size      Column Count1             109298  
              0                 0                 0         1287009432                778 
               0                 0                 0                 0....1597            
                    0               505                 0                 01916           
                     0               566                 0                
0</pre></div></div>
New output:
<div class="code panel" style="border-width: 1px;"><div
class="codeContent panelContent"><pre class="code-java">Offset      SSTables     Write
Latency      Read Latency          Row Size      Column Count1             109298         
       0                 0                 0         1287009432                778        
        0                 0                 0                 0....1597               0   
             0               505                 0                 01916               0  
              0               566                 0                
0</pre></div></div>
PS: I've attached a patch that fixes all described problems. 
 

-----------------

-----------------
Comments: 

New Comment: 
In <a href="https://issues.apache.org/jira/browse/CASSANDRA-3722" title="Send Hints to
Dynamic Snitch when Compaction or repair is going on for a node." class="issue-link"
data-issue-key="CASSANDRA-3722"><del>CASSANDRA-3722</del></a> I added similar
functionality (nodetool proxyhistograms), but that's only in 1.2. I suggest backporting
that if this is targeting 1.1 to make merging easier. 


New Comment: 
Brandon, thanks for response. <br/>I've found your changes and created patch
(Empty_values_in_histograms_v12.patch) with fixes about replacing empty values by '0'.
<br/>I think backporting is not necessary, but I can do it. Should I create patch with
your changes (about proxyhistograms) and my changes (about replacing empty values by '0')
for 1.1 version? 


New Comment: 
I'd be fine with putting proxyhistograms in 1.1 if you'd like. 


New Comment: 
I've backported 'nodetool proxyhistograms' functionality to 1.1 version. All patches are
attached. 


New Comment: 
Patches have been recreated using git instead of intellij idea. 


