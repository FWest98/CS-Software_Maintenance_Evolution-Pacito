Pattern changes caused by commit: 58518301472fc99b01cfd4bcf90bf81b5f0694ee

From: Facade-0
To:   Facade-1


=========================
       NEW GIT LOG
=========================

This commit refers to file: VALID-5645.txt 

commit 58518301472fc99b01cfd4bcf90bf81b5f0694ee
Author: Sylvain Lebresne <slebresne@apache.org>

    Fix typo introduced by #1034 in QueryProcessor
    patch by slebresne; reviewed by jbellis for CASSANDRA-3604



==================================
 Issue CASSANDRA-3604 Description 
=======================================

Project: Cassandra
-----------------

-----------------
Title: [CASSANDRA-3604] Bad code in org.apache.cassandra.cql.QueryProcessor
-----------------

-----------------
Summary: Bad code in org.apache.cassandra.cql.QueryProcessor
-----------------

-----------------
Issue type: Bug
-----------------

-----------------
Current status: Resolved
-----------------

-----------------
Created at: Sat, 10 Dec 2011 01:26:46 +0000
-----------------

-----------------
Resolved at: Mon, 12 Dec 2011 19:51:23 +0000
-----------------

-----------------
Assigned to: Sylvain Lebresne
-----------------

-----------------
Description: 

line 206:<br/>            if (rows.get(0).key.key.equals(startKey))<br/>               
rows.remove(0);

the equals will always return false because object of different types are
compared
 

-----------------

-----------------
Comments: 

New Comment: 
similar issue also on line:214:<br/>            if
(rows.get(lastIndex).key.key.equals(finishKey))<br/>               
rows.remove(lastIndex); 


New Comment: 
All the objects in question are ByteBuffers. 


New Comment: 
that is not correct:     if (rows.get(0).key.key.equals(startKey))<br/>               
rows.remove(0);rows is of type
List&lt;org.apache.cassandra.db.Row&gt;org.apache.cassandra.db.Row.key is of type
DecoratedKey&lt;?&gt;DecoratedKey&lt;?&gt;.key is of type ByteBufferstartKey is of type
RowPosition as suchByteBuffer is compared with a RowPositioncan you please explain how
startKey is of type ByteBuffer ? 


New Comment: 
see my comment 


New Comment: 
"ByteBuffer startKey", line 155 


New Comment: 
OK, I believe we are looking at different versions I see the issue in:trunk: Revision
1212726 last modified Dec 06        ByteBuffer startKeyBytes = (select.getKeyStart() !=
null)<br/>Line 155:                                   ?
select.getKeyStart().getByteBuffer(keyType)<br/>                                   : null;
       ByteBuffer finishKeyBytes = (select.getKeyFinish() != null)<br/>                   
                ? select.getKeyFinish().getByteBuffer(keyType)<br/>                       
            : null;THe actual definition<br/>        RowPosition startKey =
RowPosition.forKey(startKeyBytes, p), finishKey = RowPosition.forKey(finishKeyBytes, p); 


New Comment: 
re-opened it agains release 1.1, I see this issue in trunk, se revision detail in my
previous comment. 


New Comment: 
Good catch, patch attached. 


New Comment: 
+1 


New Comment: 
Committed, thanks 


