Pattern changes caused by commit: f20b325c3847c66eff7e939b74a5a395553315d7

From: Mediator-0
To:   Mediator-1


=========================
       NEW GIT LOG
=========================

This commit refers to file: VALID-286.txt 

commit f20b325c3847c66eff7e939b74a5a395553315d7
Author: Konstantin I Boudnik <cos@apache.org>

    HDFS-521. Create new tests for pipeline. Contributed by Konstantin Boudnik



==================================
 Issue HDFS-521 Description 
=======================================

Project: Hadoop HDFS
-----------------

-----------------
Title: [HDFS-521] Create new tests for pipeline
-----------------

-----------------
Summary: Create new tests for pipeline
-----------------

-----------------
Issue type: Sub-task
-----------------

-----------------
Current status: Closed
-----------------

-----------------
Created at: Mon, 3 Aug 2009 22:04:07 +0000
-----------------

-----------------
Resolved at: Mon, 2 Nov 2009 18:54:26 +0000
-----------------

-----------------
Assigned to: Konstantin I Boudnik
-----------------

-----------------
Description: 

This JIRA is created to be a place holder for the test implemented as a part of <a
href="https://issues.apache.org/jira/browse/HDFS-483" title="Data transfer (aka pipeline)
implementation cannot tolerate exceptions" class="issue-link"
data-issue-key="HDFS-483"><del>HDFS-483</del></a> fix
 

-----------------

-----------------
Comments: 

New Comment: 
Normal pipeline test cases 


New Comment: 
Test case placeholders 


New Comment: 
New aspects are developed, some test cases are doing what they suppose to do.<br/>I need
to find out what datanode 'successful' state means and how to correctly verify if a packet
has been placed into a disk file or an internal buffer. 


New Comment: 
Without implementation for <a href="https://issues.apache.org/jira/browse/HDFS-608"
title="BlockReceiver:receivePacket(): packet&#39;s header parsing logic is complicated.
Refactoring will help w/ testing efforts" class="issue-link"
data-issue-key="HDFS-608"><del>HDFS-608</del></a> it seems to be wasteful to implement
these tests - too much effort is needed to access the needed packet's information.
Besides, all that effort will be trashed as soon as the blocker is resolved.Thus, the
implementation of the JIRA is postponed until after 0.21 time frame 


New Comment: 
After some reconsideration and Hairong's comments the original tests scenarios look too
complicated. This is the first version of new tests implementation. Test plan description
of the test cases will be updated accordingly. 


New Comment: 
Initial version of two more test cases are added. These are using injection to verify
number of bytes received and acknowledged by datanodes. Because it uses injection
framework the class has been moved to <tt>src/test/aop</tt> hierarchy.One of the problems
with the new test cases is that the acknowledgment verification happens only for two nodes
- it doesn't happen for the last DN in a pipeline. Perhaps the binding of the aspect needs
a fine tuning. 


New Comment: 
All test cases are pretty much done, except that I'm not sure how to automate the
verification of the very last test case. Namely, it seems to be tricky to findout when DFS
client gives up on waiting. Need dig a bit more into thisTest method in
<tt>TestReadWhileWriting</tt> has been renamed to <tt>Pipeline_02_03</tt> to illustrate
that this is a test from pipeline test plan. 


New Comment: 
Sync'd with trunk after <a href="https://issues.apache.org/jira/browse/HDFS-716"
title="Define a pointcut for pipeline close" class="issue-link"
data-issue-key="HDFS-716"><del>HDFS-716</del></a> has been committed.<br/>The first test
case is failing intermittently because 'all datanodes are bad' diagnostics 


New Comment: 
The last test case verifies if more than 81 packets were sent, which seems to be
non-expected behavior 


New Comment: 
Merged with trunk.<br/>Write blocking is 100% reproducible, however even passing acks
won't unblock it. 


New Comment: 
test case method names are change to comply with Java style. 


New Comment: 
It turns out that shutting down the mini cluster solve the test's automation
problem.<br/>Everything seems be working now. 


New Comment: 
It turned out that <tt>TestReadWhileWriting</tt> had windows type of line ends. It breaks
the patch process big time. However tools like IntelliJ IDEA and Eclipse are able to take
care about this <img class="emoticon"
src="https://issues.apache.org/jira/images/icons/emoticons/smile.png" height="16"
width="16" align="absmiddle" alt="" border="0"/>Otherwise, patch is exactly as the
previous one. 


New Comment: 
Merged with the latest trunk: <tt>GenericTestUtils</tt> is no longer needed for <a
href="https://issues.apache.org/jira/browse/HDFS-616" title="Create functional tests for
new design of the block report" class="issue-link"
data-issue-key="HDFS-616"><del>HDFS-616</del></a> is committed. 


New Comment: 
I have ran fault injection tests and local test-patch. All's well.<div class="preformatted
panel" style="border-width: 1px;"><div class="preformattedContent panelContent"><pre>There
appear to be 105 release audit warnings before the patch and 105 release audit warnings
after applying the patch.+1 overall.    +1 @author.  The patch does not contain any
@author tags.    +1 tests included.  The patch appears to include 15 new or modified
tests.    +1 javadoc.  The javadoc tool did not generate any warning messages.    +1
javac.  The applied patch does not increase the total number of javac compiler warnings.  
 +1 findbugs.  The patch does not introduce any new Findbugs warnings.    +1 release
audit.  The applied patch does not increase the total number of release audit
warnings.</pre></div></div> 


New Comment: 
I checked all non-fi related changes. All look good. 


New Comment: 
Seems like the patch is ready for prime time. 


New Comment: 
-1 overall.  Here are the results of testing the latest attachment <br/>  <a
href="http://issues.apache.org/jira/secure/attachment/12423081/HDFS-521.patch"
class="external-link"
rel="nofollow">http://issues.apache.org/jira/secure/attachment/12423081/HDFS-521.patch</a><br/>
 against trunk revision 829258.    +1 @author.  The patch does not contain any @author
tags.    +1 tests included.  The patch appears to include 15 new or modified tests.    +1
javadoc.  The javadoc tool did not generate any warning messages.    +1 javac.  The
applied patch does not increase the total number of javac compiler warnings.    +1
findbugs.  The patch does not introduce any new Findbugs warnings.    +1 release audit. 
The applied patch does not increase the total number of release audit warnings.    -1 core
tests.  The patch failed core unit tests.    +1 contrib tests.  The patch passed contrib
unit tests.Test results: <a
href="http://hudson.zones.apache.org/hudson/job/Hdfs-Patch-h2.grid.sp2.yahoo.net/60/testReport/"
class="external-link"
rel="nofollow">http://hudson.zones.apache.org/hudson/job/Hdfs-Patch-h2.grid.sp2.yahoo.net/60/testReport/</a><br/>Findbugs
warnings: <a
href="http://hudson.zones.apache.org/hudson/job/Hdfs-Patch-h2.grid.sp2.yahoo.net/60/artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html"
class="external-link"
rel="nofollow">http://hudson.zones.apache.org/hudson/job/Hdfs-Patch-h2.grid.sp2.yahoo.net/60/artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html</a><br/>Checkstyle
results: <a
href="http://hudson.zones.apache.org/hudson/job/Hdfs-Patch-h2.grid.sp2.yahoo.net/60/artifact/trunk/build/test/checkstyle-errors.html"
class="external-link"
rel="nofollow">http://hudson.zones.apache.org/hudson/job/Hdfs-Patch-h2.grid.sp2.yahoo.net/60/artifact/trunk/build/test/checkstyle-errors.html</a><br/>Console
output: <a
href="http://hudson.zones.apache.org/hudson/job/Hdfs-Patch-h2.grid.sp2.yahoo.net/60/console"
class="external-link"
rel="nofollow">http://hudson.zones.apache.org/hudson/job/Hdfs-Patch-h2.grid.sp2.yahoo.net/60/console</a>This
message is automatically generated. 


New Comment: 
Fixes cast issue in some of the tests. 


New Comment: 
There was an apparent problem with a casting in some of the test. 


New Comment: 
All tests are ran locally and have finished successfully. 


New Comment: 
-1 overall.  Here are the results of testing the latest attachment <br/>  <a
href="http://issues.apache.org/jira/secure/attachment/12423219/HDFS-521.patch"
class="external-link"
rel="nofollow">http://issues.apache.org/jira/secure/attachment/12423219/HDFS-521.patch</a><br/>
 against trunk revision 829258.    +1 @author.  The patch does not contain any @author
tags.    +1 tests included.  The patch appears to include 15 new or modified tests.    +1
javadoc.  The javadoc tool did not generate any warning messages.    +1 javac.  The
applied patch does not increase the total number of javac compiler warnings.    +1
findbugs.  The patch does not introduce any new Findbugs warnings.    +1 release audit. 
The applied patch does not increase the total number of release audit warnings.    -1 core
tests.  The patch failed core unit tests.    +1 contrib tests.  The patch passed contrib
unit tests.Test results: <a
href="http://hudson.zones.apache.org/hudson/job/Hdfs-Patch-h5.grid.sp2.yahoo.net/76/testReport/"
class="external-link"
rel="nofollow">http://hudson.zones.apache.org/hudson/job/Hdfs-Patch-h5.grid.sp2.yahoo.net/76/testReport/</a><br/>Findbugs
warnings: <a
href="http://hudson.zones.apache.org/hudson/job/Hdfs-Patch-h5.grid.sp2.yahoo.net/76/artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html"
class="external-link"
rel="nofollow">http://hudson.zones.apache.org/hudson/job/Hdfs-Patch-h5.grid.sp2.yahoo.net/76/artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html</a><br/>Checkstyle
results: <a
href="http://hudson.zones.apache.org/hudson/job/Hdfs-Patch-h5.grid.sp2.yahoo.net/76/artifact/trunk/build/test/checkstyle-errors.html"
class="external-link"
rel="nofollow">http://hudson.zones.apache.org/hudson/job/Hdfs-Patch-h5.grid.sp2.yahoo.net/76/artifact/trunk/build/test/checkstyle-errors.html</a><br/>Console
output: <a
href="http://hudson.zones.apache.org/hudson/job/Hdfs-Patch-h5.grid.sp2.yahoo.net/76/console"
class="external-link"
rel="nofollow">http://hudson.zones.apache.org/hudson/job/Hdfs-Patch-h5.grid.sp2.yahoo.net/76/console</a>This
message is automatically generated. 


New Comment: 
Looks like that proposed multiple write doesn't work as expected. Returning back to the
original single write scenario. 


New Comment: 
Hi Cos, are you changing anything in TestReadWhileWriting?  The entire file
TestReadWhileWriting.java was replaced.  I cannot tell whether there is anything changed. 


New Comment: 
Look like the patch is using the fault-injection framework to implement
non-fault-injection tests.  I am not sure whether it is a good idea because it is at least
confusing. 


New Comment: 
All lines of the file were having windows-like line termination <tt>^M</tt>. I've fixed
that. Other than that there's a test method name change to be in synch with append test
plan. 


New Comment: 
Actually it is using 'injection' framework in a broader sense. Also, it creates faults in
the system to prevent acks from being delivered and such. So, I don't see any confusion
there. 


New Comment: 
-1 overall.  Here are the results of testing the latest attachment <br/>  <a
href="http://issues.apache.org/jira/secure/attachment/12423229/HDFS-521.patch"
class="external-link"
rel="nofollow">http://issues.apache.org/jira/secure/attachment/12423229/HDFS-521.patch</a><br/>
 against trunk revision 829894.    +1 @author.  The patch does not contain any @author
tags.    +1 tests included.  The patch appears to include 15 new or modified tests.    +1
javadoc.  The javadoc tool did not generate any warning messages.    +1 javac.  The
applied patch does not increase the total number of javac compiler warnings.    +1
findbugs.  The patch does not introduce any new Findbugs warnings.    +1 release audit. 
The applied patch does not increase the total number of release audit warnings.    -1 core
tests.  The patch failed core unit tests.    +1 contrib tests.  The patch passed contrib
unit tests.Test results: <a
href="http://hudson.zones.apache.org/hudson/job/Hdfs-Patch-h5.grid.sp2.yahoo.net/77/testReport/"
class="external-link"
rel="nofollow">http://hudson.zones.apache.org/hudson/job/Hdfs-Patch-h5.grid.sp2.yahoo.net/77/testReport/</a><br/>Findbugs
warnings: <a
href="http://hudson.zones.apache.org/hudson/job/Hdfs-Patch-h5.grid.sp2.yahoo.net/77/artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html"
class="external-link"
rel="nofollow">http://hudson.zones.apache.org/hudson/job/Hdfs-Patch-h5.grid.sp2.yahoo.net/77/artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html</a><br/>Checkstyle
results: <a
href="http://hudson.zones.apache.org/hudson/job/Hdfs-Patch-h5.grid.sp2.yahoo.net/77/artifact/trunk/build/test/checkstyle-errors.html"
class="external-link"
rel="nofollow">http://hudson.zones.apache.org/hudson/job/Hdfs-Patch-h5.grid.sp2.yahoo.net/77/artifact/trunk/build/test/checkstyle-errors.html</a><br/>Console
output: <a
href="http://hudson.zones.apache.org/hudson/job/Hdfs-Patch-h5.grid.sp2.yahoo.net/77/console"
class="external-link"
rel="nofollow">http://hudson.zones.apache.org/hudson/job/Hdfs-Patch-h5.grid.sp2.yahoo.net/77/console</a>This
message is automatically generated. 


New Comment: 
Test failures are unrelated and caused by <a
href="https://issues.apache.org/jira/browse/HDFS-733" title="TestBlockReport fails
intermittently" class="issue-link" data-issue-key="HDFS-733"><del>HDFS-733</del></a> 


New Comment: 
I am neutral on using AspectJ to implement tests.The confusion is that we are using
"fault-injection", "fi" or similar terms everywhere.  Even the class of the new
non-fault-injection tests in the patch is called TestFiPipelines.  It seems breaking the
naming convention. 


New Comment: 
Oh, I see your point. I'll rename this particular class and will move it out of
<tt>o.a.h.fi</tt> package. <br/>Also, the test class mixes fault-injection and
non-fault-injection tests together. Do you think it'd be more appropriate to split them
into two different test classes? 


New Comment: 
&gt; All lines of the file were having windows-like line termination ^M. I've fixed that.
Other than that there's a test method name change to be in synch with append test
plan.Could you fix the ^M problem in a separated issue?  This problem was introduced by
the patch committed in <a href="https://issues.apache.org/jira/browse/HDFS-570"
title="When opening a file for read, make the file length avaliable to client."
class="issue-link" data-issue-key="HDFS-570"><del>HDFS-570</del></a>.  There are also a
few other files having the same problem. 


New Comment: 
&gt; Also, the test class mixes fault-injection and non-fault-injection tests together. Do
you think it'd be more appropriate to split them into two different test classes?I think
we need change the naming convention including the ant targets (e.g. compile-fault-inject,
run-test-hdfs-fault-inject, etc), test class name (TestFiXxx), build-fi directory, etc. 
We may change them in a separated issue. 


New Comment: 
I do respectfully disagree that we need to change all of it for a simple reason of using
AspectJ both for fault- and injection purposes. If I've understood your proposal
correctly, you want to have a separate set of everything for fault-injection and a 'normal
injection' (for a lack of better word). right? I think it's too excessive to have 2
different sets of instrumented code.I agree that 'fault-injection' isn't a best name for
what the framework is clearly involving into... So we might consider this change later on.
I think it's simpler and more appropriate to split non-fault-injecting and fault-injecting
tests into different classes and name test methods according to the test plan. 


New Comment: 
&gt; ... you want to have a separate set of everything for fault-injection and a 'normal
injection' (for a lack of better word). right? ...No, I mean renaming the term
"fault-injection" to something else, say "aop", but not adding another framework. 


New Comment: 
After the discussion with Nicholas I'm going to split the tests cases into two different
classes and rename some of the utility ones to make it more clearer how injection
framework is used for non-fault-injected tests. 


New Comment: 
I've ran test-patch locally:<div class="preformatted panel" style="border-width:
1px;"><div class="preformattedContent panelContent"><pre>There appear to be 105 release
audit warnings before the patch and 105 release audit warnings after applying the patch.+1
overall.    +1 @author.  The patch does not contain any @author tags.    +1 tests
included.  The patch appears to include 18 new or modified tests.    +1 javadoc.  The
javadoc tool did not generate any warning messages.    +1 javac.  The applied patch does
not increase the total number of javac compiler warnings.    +1 findbugs.  The patch does
not introduce any new Findbugs warnings.    +1 release audit.  The applied patch does not
increase the total number of release audit warnings.</pre></div></div>Also, test were
executed successfully:<div class="preformatted panel" style="border-width: 1px;"><div
class="preformattedContent panelContent"><pre>% ant
run-test-hdfs-fault-injectrun-test-hdfs:...    [junit] Running
org.apache.hadoop.hdfs.TestFiHFlush    [junit] Tests run: 9, Failures: 0, Errors: 0, Time
elapsed: 35.187 sec    [junit] Running org.apache.hadoop.hdfs.TestFiPipelines    [junit]
Tests run: 3, Failures: 0, Errors: 0, Time elapsed: 13.595 sec    [junit] Running
org.apache.hadoop.hdfs.server.datanode.TestFiDataTransferProtocol    [junit] Tests run:
29, Failures: 0, Errors: 0, Time elapsed: 355.143 sec% ant run-test-hdfs
-Dtestcase=TestPipelinesrun-test-hdfs:...    [junit] Running
org.apache.hadoop.hdfs.TestPipelines    [junit] Tests run: 1, Failures: 0, Errors: 0, Time
elapsed: 5.662 sec% ant run-test-hdfs -Dtestcase=TestReadWhileWritingrun-test-hdfs:...   
[junit] Running org.apache.hadoop.hdfs.TestReadWhileWriting    [junit] Tests run: 1,
Failures: 0, Errors: 0, Time elapsed: 5.735 sec</pre></div></div>} 


New Comment: 
Here's new version of the patch for the last run of tests and test-patch 


New Comment: 
Seems to be good to go. Reviewers' comments are addressed. 


New Comment: 
-1 overall.  Here are the results of testing the latest attachment <br/>  <a
href="http://issues.apache.org/jira/secure/attachment/12423263/HDFS-521.patch"
class="external-link"
rel="nofollow">http://issues.apache.org/jira/secure/attachment/12423263/HDFS-521.patch</a><br/>
 against trunk revision 830003.    +1 @author.  The patch does not contain any @author
tags.    +1 tests included.  The patch appears to include 18 new or modified tests.    +1
javadoc.  The javadoc tool did not generate any warning messages.    +1 javac.  The
applied patch does not increase the total number of javac compiler warnings.    +1
findbugs.  The patch does not introduce any new Findbugs warnings.    +1 release audit. 
The applied patch does not increase the total number of release audit warnings.    -1 core
tests.  The patch failed core unit tests.    +1 contrib tests.  The patch passed contrib
unit tests.Test results: <a
href="http://hudson.zones.apache.org/hudson/job/Hdfs-Patch-h5.grid.sp2.yahoo.net/79/testReport/"
class="external-link"
rel="nofollow">http://hudson.zones.apache.org/hudson/job/Hdfs-Patch-h5.grid.sp2.yahoo.net/79/testReport/</a><br/>Findbugs
warnings: <a
href="http://hudson.zones.apache.org/hudson/job/Hdfs-Patch-h5.grid.sp2.yahoo.net/79/artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html"
class="external-link"
rel="nofollow">http://hudson.zones.apache.org/hudson/job/Hdfs-Patch-h5.grid.sp2.yahoo.net/79/artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html</a><br/>Checkstyle
results: <a
href="http://hudson.zones.apache.org/hudson/job/Hdfs-Patch-h5.grid.sp2.yahoo.net/79/artifact/trunk/build/test/checkstyle-errors.html"
class="external-link"
rel="nofollow">http://hudson.zones.apache.org/hudson/job/Hdfs-Patch-h5.grid.sp2.yahoo.net/79/artifact/trunk/build/test/checkstyle-errors.html</a><br/>Console
output: <a
href="http://hudson.zones.apache.org/hudson/job/Hdfs-Patch-h5.grid.sp2.yahoo.net/79/console"
class="external-link"
rel="nofollow">http://hudson.zones.apache.org/hudson/job/Hdfs-Patch-h5.grid.sp2.yahoo.net/79/console</a>This
message is automatically generated. 


New Comment: 
Race condition between main and external checker thread. 


New Comment: 
Fixing the race condition between two thread:<ul class="alternate"
type="square">	<li>external thread tries to shutdown the cluster when a condition is
met</li>	<li>main thread invokes @After method which checks cluster reference for null and
then shuts down datanodes and then the cluster itself. The cluster references might become
null in between of these two calls. Thus a separate check for null is in order.</li></ul> 


New Comment: 
-1 overall.  Here are the results of testing the latest attachment <br/>  <a
href="http://issues.apache.org/jira/secure/attachment/12423328/HDFS-521.patch"
class="external-link"
rel="nofollow">http://issues.apache.org/jira/secure/attachment/12423328/HDFS-521.patch</a><br/>
 against trunk revision 830003.    +1 @author.  The patch does not contain any @author
tags.    +1 tests included.  The patch appears to include 18 new or modified tests.    +1
javadoc.  The javadoc tool did not generate any warning messages.    +1 javac.  The
applied patch does not increase the total number of javac compiler warnings.    +1
findbugs.  The patch does not introduce any new Findbugs warnings.    +1 release audit. 
The applied patch does not increase the total number of release audit warnings.    -1 core
tests.  The patch failed core unit tests.    +1 contrib tests.  The patch passed contrib
unit tests.Test results: <a
href="http://hudson.zones.apache.org/hudson/job/Hdfs-Patch-h5.grid.sp2.yahoo.net/80/testReport/"
class="external-link"
rel="nofollow">http://hudson.zones.apache.org/hudson/job/Hdfs-Patch-h5.grid.sp2.yahoo.net/80/testReport/</a><br/>Findbugs
warnings: <a
href="http://hudson.zones.apache.org/hudson/job/Hdfs-Patch-h5.grid.sp2.yahoo.net/80/artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html"
class="external-link"
rel="nofollow">http://hudson.zones.apache.org/hudson/job/Hdfs-Patch-h5.grid.sp2.yahoo.net/80/artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html</a><br/>Checkstyle
results: <a
href="http://hudson.zones.apache.org/hudson/job/Hdfs-Patch-h5.grid.sp2.yahoo.net/80/artifact/trunk/build/test/checkstyle-errors.html"
class="external-link"
rel="nofollow">http://hudson.zones.apache.org/hudson/job/Hdfs-Patch-h5.grid.sp2.yahoo.net/80/artifact/trunk/build/test/checkstyle-errors.html</a><br/>Console
output: <a
href="http://hudson.zones.apache.org/hudson/job/Hdfs-Patch-h5.grid.sp2.yahoo.net/80/console"
class="external-link"
rel="nofollow">http://hudson.zones.apache.org/hudson/job/Hdfs-Patch-h5.grid.sp2.yahoo.net/80/console</a>This
message is automatically generated. 


New Comment: 
Ok, the failing test is because of <a
href="https://issues.apache.org/jira/browse/HDFS-733" title="TestBlockReport fails
intermittently" class="issue-link" data-issue-key="HDFS-733"><del>HDFS-733</del></a>. The
rest looks good. 


New Comment: 
1. miss testcase pipeline-03.<br/>2. for pipeline-04 and 05, should check br and ba on all
datanodes in the pipeline<br/>3. for pipeline-06, no need of wait in QueueChecker after
the queue is filled up. 


New Comment: 
Addressing Hairong's comments:<ul class="alternate" type="square">	<li>datanodes order is
now preserved by using a List instead of HashMap</li>	<li>the invariant is verified across
all datanodes</li>	<li>redundant wait is removed</li>	<li>testcase _03 is suppose to be
covered by <tt>TestReadWhileWriting</tt> however a multiple packet writes creates some
strange problems in the test, which might be taken care off separately</li></ul> 


New Comment: 
Resubmitting the patch for another round of verification after modifying it. 


New Comment: 
+1&gt; testcase _03 is suppose to be covered by TestReadWhileWriting however a multiple
packet writes creates some strange problems in the test, which might be taken care off
separately<br/>Could you please open a jira on this? Is it a problem with the test or the
pipeline implementation? 


New Comment: 
Thanks for the review, Hairong. This new JIRA is about this particular issue. 


New Comment: 
I've just committed this. 


New Comment: 
Integrated in Hadoop-Hdfs-trunk-Commit #96 (See <a
href="http://hudson.zones.apache.org/hudson/job/Hadoop-Hdfs-trunk-Commit/96/"
class="external-link"
rel="nofollow">http://hudson.zones.apache.org/hudson/job/Hadoop-Hdfs-trunk-Commit/96/</a>) 


New Comment: 
Integrated in Hdfs-Patch-h5.grid.sp2.yahoo.net #100 (See <a
href="http://hudson.zones.apache.org/hudson/job/Hdfs-Patch-h5.grid.sp2.yahoo.net/100/"
class="external-link"
rel="nofollow">http://hudson.zones.apache.org/hudson/job/Hdfs-Patch-h5.grid.sp2.yahoo.net/100/</a>) 


New Comment: 
Integrated in Hadoop-Hdfs-trunk #136 (See <a
href="http://hudson.zones.apache.org/hudson/job/Hadoop-Hdfs-trunk/136/"
class="external-link"
rel="nofollow">http://hudson.zones.apache.org/hudson/job/Hadoop-Hdfs-trunk/136/</a>) 


