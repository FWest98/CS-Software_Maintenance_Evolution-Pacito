Pattern changes caused by commit: 67b896c75e12a4a28b9fdf12f1249ea2bd0624b0

From: Mediator-1
To:   Mediator-0


=========================
       NEW GIT LOG
=========================

This commit refers to file: VALID-282.txt 

commit 67b896c75e12a4a28b9fdf12f1249ea2bd0624b0
Author: Konstantin Shvachko <shv@apache.org>

    HDFS-736. commitBlockSynchronization() updates block GS and length in-place. Contributed by Konstantin Shvachko.



==================================
 Issue HDFS-736 Description 
=======================================

Project: Hadoop HDFS
-----------------

-----------------
Title: [HDFS-736] commitBlockSynchronization() should directly update block GS and length.
-----------------

-----------------
Summary: commitBlockSynchronization() should directly update block GS and length.
-----------------

-----------------
Issue type: Improvement
-----------------

-----------------
Current status: Closed
-----------------

-----------------
Created at: Mon, 26 Oct 2009 21:44:35 +0000
-----------------

-----------------
Resolved at: Fri, 30 Oct 2009 00:35:05 +0000
-----------------

-----------------
Assigned to: Konstantin Shvachko
-----------------

-----------------
Description: 

<tt>FSNamesystem.commitBlockSynchronization()</tt> updates block's generation stamp and
length by first removing the old block instance from blocksMap and then inserting the new
instance back. This was necessary when GS was a part of the block key. After <a
href="https://issues.apache.org/jira/browse/HDFS-512" title="Set block id as the key to
Block" class="issue-link" data-issue-key="HDFS-512"><del>HDFS-512</del></a> the GS along
with the block length can be updated directly in the blocksMap entry.
 

-----------------

-----------------
Comments: 

New Comment: 
This patch updates the block "in place". 


New Comment: 
+1 overall.  Here are the results of testing the latest attachment <br/>  <a
href="http://issues.apache.org/jira/secure/attachment/12423506/commitBlockSync.patch"
class="external-link"
rel="nofollow">http://issues.apache.org/jira/secure/attachment/12423506/commitBlockSync.patch</a><br/>
 against trunk revision 830003.    +1 @author.  The patch does not contain any @author
tags.    -1 tests included.  The patch doesn't appear to include any new or modified
tests.<br/>                        Please justify why no new tests are needed for this
patch.<br/>                        Also please list what manual steps were performed to
verify this patch.    +1 javadoc.  The javadoc tool did not generate any warning messages.
   +1 javac.  The applied patch does not increase the total number of javac compiler
warnings.    +1 findbugs.  The patch does not introduce any new Findbugs warnings.    +1
release audit.  The applied patch does not increase the total number of release audit
warnings.    +1 core tests.  The patch passed core unit tests.    +1 contrib tests.  The
patch passed contrib unit tests.Test results: <a
href="http://hudson.zones.apache.org/hudson/job/Hdfs-Patch-h2.grid.sp2.yahoo.net/65/testReport/"
class="external-link"
rel="nofollow">http://hudson.zones.apache.org/hudson/job/Hdfs-Patch-h2.grid.sp2.yahoo.net/65/testReport/</a><br/>Findbugs
warnings: <a
href="http://hudson.zones.apache.org/hudson/job/Hdfs-Patch-h2.grid.sp2.yahoo.net/65/artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html"
class="external-link"
rel="nofollow">http://hudson.zones.apache.org/hudson/job/Hdfs-Patch-h2.grid.sp2.yahoo.net/65/artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html</a><br/>Checkstyle
results: <a
href="http://hudson.zones.apache.org/hudson/job/Hdfs-Patch-h2.grid.sp2.yahoo.net/65/artifact/trunk/build/test/checkstyle-errors.html"
class="external-link"
rel="nofollow">http://hudson.zones.apache.org/hudson/job/Hdfs-Patch-h2.grid.sp2.yahoo.net/65/artifact/trunk/build/test/checkstyle-errors.html</a><br/>Console
output: <a
href="http://hudson.zones.apache.org/hudson/job/Hdfs-Patch-h2.grid.sp2.yahoo.net/65/console"
class="external-link"
rel="nofollow">http://hudson.zones.apache.org/hudson/job/Hdfs-Patch-h2.grid.sp2.yahoo.net/65/console</a>This
message is automatically generated. 


New Comment: 
+1 for the patch. 


New Comment: 
No new tests required, modified functionality is checked by the existing tests
TestLeaseRecovery and TestLeaseRecovery2. 


New Comment: 
I just committed this. 


New Comment: 
Integrated in Hadoop-Hdfs-trunk-Commit #90 (See <a
href="http://hudson.zones.apache.org/hudson/job/Hadoop-Hdfs-trunk-Commit/90/"
class="external-link"
rel="nofollow">http://hudson.zones.apache.org/hudson/job/Hadoop-Hdfs-trunk-Commit/90/</a>)<br/>
   . commitBlockSynchronization() updates block GS and length in-place. Contributed by
Konstantin Shvachko. 


New Comment: 
Integrated in Hdfs-Patch-h5.grid.sp2.yahoo.net #100 (See <a
href="http://hudson.zones.apache.org/hudson/job/Hdfs-Patch-h5.grid.sp2.yahoo.net/100/"
class="external-link"
rel="nofollow">http://hudson.zones.apache.org/hudson/job/Hdfs-Patch-h5.grid.sp2.yahoo.net/100/</a>) 


New Comment: 
Integrated in Hadoop-Hdfs-trunk #136 (See <a
href="http://hudson.zones.apache.org/hudson/job/Hadoop-Hdfs-trunk/136/"
class="external-link"
rel="nofollow">http://hudson.zones.apache.org/hudson/job/Hadoop-Hdfs-trunk/136/</a>) 


