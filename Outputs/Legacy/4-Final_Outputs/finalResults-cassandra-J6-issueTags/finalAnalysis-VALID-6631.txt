Pattern changes caused by commit: dc975e8ac3c6fc557e8b2b3ad83742bd259f91ac

From: Flyweight-1
To:   Flyweight-3

From: Mediator-1
To:   Mediator-2


=========================
       NEW GIT LOG
=========================

This commit refers to file: VALID-6631.txt 

commit dc975e8ac3c6fc557e8b2b3ad83742bd259f91ac
Author: Jonathan Ellis <jbellis@apache.org>

    fix recognizing uppercase SELECT keyword
    patch by Jonas Dohse and pcannon for CASSANDRA-4161



==================================
 Issue CASSANDRA-4161 Description 
=======================================

Project: Cassandra
-----------------

-----------------
Title: [CASSANDRA-4161] CQL 3.0 does not work in cqlsh with uppercase SELECT
-----------------

-----------------
Summary: CQL 3.0 does not work in cqlsh with uppercase SELECT
-----------------

-----------------
Issue type: Bug
-----------------

-----------------
Current status: Resolved
-----------------

-----------------
Created at: Tue, 17 Apr 2012 12:20:48 +0000
-----------------

-----------------
Resolved at: Thu, 19 Apr 2012 19:02:53 +0000
-----------------

-----------------
Assigned to: Jonas Dohse
-----------------

-----------------
Description: 

Uppercase SELECT prevents usage of CQL 3.0 features like ORDER BY

Example:

select *
from test ORDER BY number; # works<br/>SELECT * from test ORDER BY number; # fails
 

-----------------

-----------------
Comments: 

New Comment: 
Fix problem by converting command to lower case 


New Comment: 
Good catch, thanks. I do think that a slightly better solution is to do the downcasing in
a more specific place, though, as attached. I would like to keep original case intact in
cmdword, even if it's just for error messages right now.Does this work for you?(also
available in my 4161 branch in github: <a
href="https://github.com/thepaul/cassandra/tree/4161" class="external-link"
rel="nofollow">https://github.com/thepaul/cassandra/tree/4161</a>) 


New Comment: 
I'm wondering why CQL is being parsed in the client at all? Couldn't we just handle the
exceptions thrown by cassandra? That way we wouldn't have to keep cqlsh in sync with CQL
development on the C*-side. 


New Comment: 
Works for meâ„¢ 


New Comment: 
<blockquote>I'm wondering why CQL is being parsed in the client at all? Couldn't we just
handle the exceptions thrown by cassandra? That way we wouldn't have to keep cqlsh in sync
with CQL development on the C*-side.</blockquote>cqlsh has to attempt to parse input in
order to recognize keyspace switches, provide tab-completion, implement the cqlsh-specific
commands, separate multiple statements, and (in the future) to allow things like <a
href="https://issues.apache.org/jira/browse/CASSANDRA-3799" title="cqlsh: ASSUME should
also change how values are sent to cassandra" class="issue-link"
data-issue-key="CASSANDRA-3799"><del>CASSANDRA-3799</del></a>.Yes, of course, if cqlsh can
identify a CQL statement but can't parse it, and it doesn't recognize the command word as
being cqlsh-specific, it should pass the CQL on untouched to Cassandra. The problem in
this ticket was with cqlsh deciding incorrectly that the user intended to give a
cqlsh-only command. 


New Comment: 
+1 for 4161.patch.txt. 


New Comment: 
+1 for 4161.patch.txt 


