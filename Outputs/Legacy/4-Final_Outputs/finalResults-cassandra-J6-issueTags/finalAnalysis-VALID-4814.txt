Pattern changes caused by commit: 04bd02682b38e6197628b8374b140be5d3b34e90

From: Decorator-1
To:   Decorator-0

From: Flyweight-4
To:   Flyweight-5

From: Strategy-1
To:   Strategy-0


=========================
       NEW GIT LOG
=========================

This commit refers to file: VALID-4814.txt 

commit 04bd02682b38e6197628b8374b140be5d3b34e90
Author: Pavel Yaskevich <xedin@apache.org>

    CustomTThreadPoolServer to log TTransportException at DEBUG level
    patch by Jim Ancona; reviewed by Pavel Yaskevich for CASSANDRA-3142



==================================
 Issue CASSANDRA-3142 Description 
=======================================

Project: Cassandra
-----------------

-----------------
Title: [CASSANDRA-3142] CustomTThreadPoolServer should log TTransportException at DEBUG level
-----------------

-----------------
Summary: CustomTThreadPoolServer should log TTransportException at DEBUG level
-----------------

-----------------
Issue type: Bug
-----------------

-----------------
Current status: Resolved
-----------------

-----------------
Created at: Tue, 6 Sep 2011 02:10:10 +0000
-----------------

-----------------
Resolved at: Wed, 7 Sep 2011 13:42:14 +0000
-----------------

-----------------
Assigned to: James P. Ancona
-----------------

-----------------
Description: 

Currently CustomTThreadPoolServer, like the Thrift TThreadPoolServer, silently ignores
TTransportException in its run() method. This is appropriate in most cases because
TTransportException occurs fairly often when client connections die. However
TTransportException is also thrown when TFramedTransport encounters a frame that is larger
than thrift_framed_transport_size_in_mb. In that case, silently exiting the run loop leads
to a SocketException on the client side which can be both difficult to diagnose, in part
because nothing is logged by Cassandra, and high-impact, because the client may respond by
marking the server node down and retrying the too-large request on another node, where it
also fails. This process repeated leads to the entire cluster being marked down (see <a
href="https://github.com/rantav/hector/issues/212" class="external-link"
rel="nofollow">https://github.com/rantav/hector/issues/212</a>). I've filed two Thrift
issues (<a href="https://issues.apache.org/jira/browse/THRIFT-1323" class="external-link"
rel="nofollow">https://issues.apache.org/jira/browse/THRIFT-1323</a> and <a
href="https://issues.apache.org/jira/browse/THRIFT-1324" class="external-link"
rel="nofollow">https://issues.apache.org/jira/browse/THRIFT-1324</a>), but in the
meantime, I suggest that CustomTThreadPoolServer log the exception at DEBUG level in order
to support easier troubleshooting.
 

-----------------

-----------------
Comments: 

New Comment: 
Committed. 


