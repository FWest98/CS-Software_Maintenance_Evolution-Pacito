Pattern changes caused by commit: d909fb4faf7de41b3cf19f19b48f962ab0e6fb32

From: Decorator-2
To:   Decorator-1

From: Facade-0
To:   Facade-1

From: Flyweight-2
To:   Flyweight-1

From: Mediator-3
To:   Mediator-1

From: Strategy-0
To:   Strategy-1


=========================
       NEW GIT LOG
=========================

This commit refers to file: VALID-7837.txt 

commit d909fb4faf7de41b3cf19f19b48f962ab0e6fb32
Author: Brandon Williams <brandonwilliams@apache.org>

    Fix row key population with old-style mapred interface.
    Patch by Ben Kempe, reviewed by brandonwilliams for CASSANDRA-4834



==================================
 Issue CASSANDRA-4834 Description 
=======================================

Project: Cassandra
-----------------

-----------------
Title: [CASSANDRA-4834] Old-style mapred interface only populates row key for first column when using wide rows
-----------------

-----------------
Summary: Old-style mapred interface only populates row key for first column when using wide rows
-----------------

-----------------
Issue type: Bug
-----------------

-----------------
Current status: Resolved
-----------------

-----------------
Created at: Thu, 18 Oct 2012 21:37:17 +0000
-----------------

-----------------
Resolved at: Tue, 6 Nov 2012 12:25:30 +0000
-----------------

-----------------
Assigned to: Ben Kempe
-----------------

-----------------
Description: 

When using the ColumnFamilyRecordReader with the old-style Hadoop interface to iterate
over wide row columns, the row key is only populated on the first column.<br/>See attached
tests.
 

-----------------

-----------------
Comments: 

New Comment: 
TestJob is using the new mapred interface and produces the correct
output.<br/>TestJobOldHadoop does not populate the row key for columns after the first. 


New Comment: 
patch 


New Comment: 
lastColumn also needs a duplicated ByteBuffer.<br/>Otherwise, if the column name is
consumed in the map/reduce code, the expression in<br/><a
href="https://github.com/apache/cassandra/blob/trunk/src/java/org/apache/cassandra/hadoop/ColumnFamilyRecordReader.java#L458"
class="external-link"
rel="nofollow">https://github.com/apache/cassandra/blob/trunk/src/java/org/apache/cassandra/hadoop/ColumnFamilyRecordReader.java#L458</a><br/>will
evaluate to false and the CFRR can get into an infinite loop. 


New Comment: 
<a href="https://issues.apache.org/jira/secure/ViewProfile.jspa?name=bkempe"
class="user-hover" rel="bkempe">Ben Kempe</a> can you rebase to 1.1?  I don't see any
reason to not include this there.  Looks good otherwise, thanks! 


New Comment: 
added patch for cassandra-1.1 branch 


