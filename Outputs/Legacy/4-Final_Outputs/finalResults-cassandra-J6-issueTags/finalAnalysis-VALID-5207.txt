Pattern changes caused by commit: 4887d794f299c86de889d2985746e87f06879ba6

From: Decorator-1
To:   Decorator-0

From: Flyweight-4
To:   Flyweight-5

From: Strategy-1
To:   Strategy-0


=========================
       NEW GIT LOG
=========================

This commit refers to file: VALID-5207.txt 

commit 4887d794f299c86de889d2985746e87f06879ba6
Author: Brandon Williams <brandonwilliams@apache.org>

    Fix pig script to only pick up a single pig jar.
    Patch by Brian Oneill, reviewed by brandonwilliams for CASSANDRA-3320



==================================
 Issue CASSANDRA-3320 Description 
=======================================

Project: Cassandra
-----------------

-----------------
Title: [CASSANDRA-3320] pig_cassandra script errors when running against pig 0.9.1 tar ball because there are multiple jars.
-----------------

-----------------
Summary: pig_cassandra script errors when running against pig 0.9.1 tar ball because there are multiple jars.
-----------------

-----------------
Issue type: Bug
-----------------

-----------------
Current status: Resolved
-----------------

-----------------
Created at: Wed, 5 Oct 2011 20:07:20 +0000
-----------------

-----------------
Resolved at: Wed, 12 Oct 2011 16:12:55 +0000
-----------------

-----------------
Assigned to: Brian ONeill
-----------------

-----------------
Description: 

The pig_cassandra script in contrib/pig/bin assumes there is only one pig jar file in
$PIG_HOME.  However, the latest release of pig 0.9.1 has two jar files: one for hadoop and
one without hadoop.  See below:

bone@zen:~/tools/pig-0.9.1-&gt; ls -al
*.jar<br/><del>rw-r</del><del>r</del>-  1 bone  staff   5130595 Sep 29 18:55
pig-0.9.1-withouthadoop.jar<br/><del>rw-r</del><del>r</del>-  1 bone  staff  12430153 Sep
29 18:55 pig-0.9.1.jar

This breaks the shell script with:<br/>bin/pig_cassandra: line 42:
[: /Users/bone/tools/pig/pig-0.9.1-withouthadoop.jar: binary operator
expected<br/>Unrecognized option: -x

Attached is a patch for the shell script that takes
the last jar file listed in the directory. This fixes the problem.  I also add an "echo"
to notify the user which jar file they are using. 
 

-----------------

-----------------
Comments: 

New Comment: 
Patch 


New Comment: 
Also, I just noticed when running on my linux under bash I get the following
error:<br/><span class="error">&#91;boneill@boneill-lin&#93;</span> pig $
bin/pig_cassandra -x local example-script.pig <br/>Unrecognized option: -x<br/>Could not
create the Java virtual machine.When I echo the $PIG_JAR variable, I get:<br/>$PIG_JAR =
/home/boneill/tools/pig/pig*.jarThus, the jar file resolution isn't working.  This same
patch fixes this on linux/bash as well. 


New Comment: 
Committed, thanks. 


