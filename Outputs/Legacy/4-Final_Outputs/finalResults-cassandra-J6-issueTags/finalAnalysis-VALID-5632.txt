Pattern changes caused by commit: 96d92fb5d9e16e1d7b5871e0c1117f00e2e166c6

From: Decorator-1
To:   Decorator-0

From: Flyweight-4
To:   Flyweight-5

From: Strategy-1
To:   Strategy-0


=========================
       NEW GIT LOG
=========================

This commit refers to file: VALID-5632.txt 

commit 96d92fb5d9e16e1d7b5871e0c1117f00e2e166c6
Author: Brandon Williams <brandonwilliams@apache.org>

    Prevent gossiper from adding itself to saved endpoints.
    Patch by brandonwilliams reviewed by Paul Cannon for CASSANDRA-3485.



==================================
 Issue CASSANDRA-3485 Description 
=======================================

Project: Cassandra
-----------------

-----------------
Title: [CASSANDRA-3485] Gossiper.addSavedEndpoint should never add itself
-----------------

-----------------
Summary: Gossiper.addSavedEndpoint should never add itself
-----------------

-----------------
Issue type: Bug
-----------------

-----------------
Current status: Resolved
-----------------

-----------------
Created at: Fri, 11 Nov 2011 22:22:15 +0000
-----------------

-----------------
Resolved at: Fri, 9 Dec 2011 21:20:27 +0000
-----------------

-----------------
Assigned to: Brandon Williams
-----------------

-----------------
Description: 

Somehow, people are running into a situation where nodes are adding themselves to the
persisted ring cache.  Since SS is initialized after the Gossiper and calls
addSavedEndpoint on it, which inits the nodes with a generation of zero, this ends up with
nodes using a generation of zero and thus never being marked as alive.
 

-----------------

-----------------
Comments: 

New Comment: 
Note that you can get around this with -Dcassandra.load_ring_state=false 


New Comment: 
Patch to prevent adding our own endpoint to saved endpoints, and if detected, remove it. 


New Comment: 
+1. 


New Comment: 
Committed. 


