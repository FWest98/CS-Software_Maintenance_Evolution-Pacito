Pattern changes caused by commit: 98b9cb47f991937b5e92178856bb6017ff6c13c0

From: Strategy-0
To:   Strategy-1


=========================
       NEW GIT LOG
=========================

This commit refers to file: VALID-9432.txt 

commit 98b9cb47f991937b5e92178856bb6017ff6c13c0
Author: Jonathan Ellis <jbellis@apache.org>

    Fix dealing with ridiculously large max sstable sizes in LCS
    patch by jbellis; reviewed by marcuse for CASSANDRA-5589



==================================
 Issue CASSANDRA-5589 Description 
=======================================

Project: Cassandra
-----------------

-----------------
Title: [CASSANDRA-5589] ArrayIndexOutOfBoundsException in LeveledManifest
-----------------

-----------------
Summary: ArrayIndexOutOfBoundsException in LeveledManifest
-----------------

-----------------
Issue type: Bug
-----------------

-----------------
Current status: Resolved
-----------------

-----------------
Created at: Thu, 23 May 2013 12:36:17 +0000
-----------------

-----------------
Resolved at: Thu, 23 May 2013 19:51:07 +0000
-----------------

-----------------
Assigned to: Jonathan Ellis
-----------------

-----------------
Description: 

The following stack trace was in the system.log:
<blockquote>
ERROR <span
class="error">&#91;CompactionExecutor:2&#93;</span> 2013-05-22 16:19:32,402
CassandraDaemon.java (line 174) Exception in thread Thread<span
class="error">&#91;CompactionExecutor:2,1,main&#93;</span><br/>
java.lang.ArrayIndexOutOfBoundsException: 5<br/>	at
org.apache.cassandra.db.compaction.LeveledManifest.skipLevels(LeveledManifest.java:176)<br/>	at
org.apache.cassandra.db.compaction.LeveledManifest.promote(LeveledManifest.java:215)<br/>	at
org.apache.cassandra.db.compaction.LeveledCompactionStrategy.handleNotification(LeveledCompactionStrategy.java:155)<br/>	at
org.apache.cassandra.db.DataTracker.notifySSTablesChanged(DataTracker.java:410)<br/>	at
org.apache.cassandra.db.DataTracker.replaceCompactedSSTables(DataTracker.java:223)<br/>	at
org.apache.cassandra.db.ColumnFamilyStore.replaceCompactedSSTables(ColumnFamilyStore.java:991)<br/>	at
org.apache.cassandra.db.compaction.CompactionTask.runWith(CompactionTask.java:230)<br/>	at
org.apache.cassandra.io.util.DiskAwareRunnable.runMayThrow(DiskAwareRunnable.java:48)<br/>	at
org.apache.cassandra.utils.WrappedRunnable.run(WrappedRunnable.java:28)<br/>	at
org.apache.cassandra.db.compaction.CompactionTask.executeInternal(CompactionTask.java:58)<br/>	at
org.apache.cassandra.db.compaction.AbstractCompactionTask.execute(AbstractCompactionTask.java:60)<br/>	at
org.apache.cassandra.db.compaction.CompactionManager$BackgroundCompactionTask.run(CompactionManager.java:188)
</blockquote> 

-----------------

-----------------
Comments: 

New Comment: 
The manifest is assuming that when the sstable size is increased, existing sstables are
magically resized to that, which is not the case.Fix attached, with an additional warning
to not increase sstable size above 1GB (which is what the user has done here). 


New Comment: 
lgtm 


New Comment: 
committed 


