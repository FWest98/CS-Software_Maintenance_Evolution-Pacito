Pattern changes caused by commit: 40a13696e40ce24e8331ef5e500228d862b5945a

From: Abstract Factory-3
To:   Abstract Factory-2

From: Factory Method-3
To:   Factory Method-2

From: Mediator-2
To:   Mediator-1


=========================
       NEW GIT LOG
=========================

This commit refers to file: VALID-4127.txt 

commit 40a13696e40ce24e8331ef5e500228d862b5945a
Author: Jonathan Ellis <jbellis@apache.org>

    avoid replaying hints to dropped columnfamilies
    patch by jbellis; reviewed by gdusbabek for CASSANDRA-2685



==================================
 Issue CASSANDRA-2685 Description 
=======================================

Project: Cassandra
-----------------

-----------------
Title: [CASSANDRA-2685] NPE in Table.createReplicationStrategy during sends from HintedHandOffManager
-----------------

-----------------
Summary: NPE in Table.createReplicationStrategy during sends from HintedHandOffManager
-----------------

-----------------
Issue type: Bug
-----------------

-----------------
Current status: Resolved
-----------------

-----------------
Created at: Mon, 23 May 2011 11:59:03 +0000
-----------------

-----------------
Resolved at: Mon, 23 May 2011 14:21:17 +0000
-----------------

-----------------
Assigned to: Jonathan Ellis
-----------------

-----------------
Description: 

After about 800k inserts in a column family with RF=1, I get this exception:
<div
class="code panel" style="border-width: 1px;"><div class="codeContent panelContent"><pre
class="code-java">ERROR [HintedHandoff:2] 2011-05-20 18:38:25,089
AbstractCassandraDaemon.java (line 114) Fatal exception in thread <span
class="code-object">Thread</span>[HintedHandoff:2,1,main]java.lang.RuntimeException:
java.lang.NullPointerException	at
org.apache.cassandra.utils.WrappedRunnable.run(WrappedRunnable.java:34)	at
java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)	at
java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)	at
java.lang.<span class="code-object">Thread</span>.run(<span
class="code-object">Thread</span>.java:662)Caused by: java.lang.NullPointerException	at
org.apache.cassandra.db.Table.createReplicationStrategy(Table.java:266)	at
org.apache.cassandra.db.Table.&lt;init&gt;(Table.java:212)	at
org.apache.cassandra.db.Table.open(Table.java:106)	at
org.apache.cassandra.db.HintedHandOffManager.sendMessage(HintedHandOffManager.java:131)	at
org.apache.cassandra.db.HintedHandOffManager.deliverHintsToEndpoint(HintedHandOffManager.java:331)	at
org.apache.cassandra.db.HintedHandOffManager.access$100(HintedHandOffManager.java:88)	at
org.apache.cassandra.db.HintedHandOffManager$2.runMayThrow(HintedHandOffManager.java:409)	at
org.apache.cassandra.utils.WrappedRunnable.run(WrappedRunnable.java:30)	... 3
more</pre></div></div> 

-----------------

-----------------
Comments: 

New Comment: 
patch to skip replay of hints for dropped KS/CF 


New Comment: 
+1. 


New Comment: 
committed 


