Pattern changes caused by commit: 46e61bfeb31ce377676345aa878b4c6218c9e7bb

From: Decorator-1
To:   Decorator-0

From: Flyweight-4
To:   Flyweight-5

From: Strategy-1
To:   Strategy-0


=========================
       NEW GIT LOG
=========================

This commit refers to file: VALID-5478.txt 

commit 46e61bfeb31ce377676345aa878b4c6218c9e7bb
Author: Brandon Williams <brandonwilliams@apache.org>

    Set default rack/dc in ec2snitch to avoid NPEs.
    Patch by Alex Araujo, reviewed by brandonwilliams for CASSANDRA-3186.



==================================
 Issue CASSANDRA-3186 Description 
=======================================

Project: Cassandra
-----------------

-----------------
Title: [CASSANDRA-3186] nodetool should not NPE when rack/dc info is not yet available
-----------------

-----------------
Summary: nodetool should not NPE when rack/dc info is not yet available
-----------------

-----------------
Issue type: Bug
-----------------

-----------------
Current status: Resolved
-----------------

-----------------
Created at: Mon, 12 Sep 2011 20:15:54 +0000
-----------------

-----------------
Resolved at: Wed, 16 Nov 2011 21:46:47 +0000
-----------------

-----------------
Assigned to: Brandon Williams
-----------------

-----------------
Description: 

As the title says.  What happens is the persisted ring is loaded, but if those nodes are
down and you're using a snitch like ec2 that gets rack/dc info from gossip, nodetool NPEs
instead of showing that the node is down.
 

-----------------

-----------------
Comments: 

New Comment: 
Is this related to <a href="https://issues.apache.org/jira/browse/CASSANDRA-3175"
title="Ec2Snitch nodetool issue after upgrade to 0.8.5" class="issue-link"
data-issue-key="CASSANDRA-3175"><del>CASSANDRA-3175</del></a>? 


New Comment: 
Yes. 


New Comment: 
Merges 1.0's Ec2Snitch which does the right thing 


New Comment: 
Committed.  Note that I think this is the preferable way to solve this, since it allows
you to change snitches for <a href="https://issues.apache.org/jira/browse/CASSANDRA-3114"
title="After Choosing EC2Snitch you can&#39;t migrate off w/o a full cluster restart"
class="issue-link" data-issue-key="CASSANDRA-3114"><del>CASSANDRA-3114</del></a>, though
your consistency guarantees will likely be violated and require repair afterwards. 


