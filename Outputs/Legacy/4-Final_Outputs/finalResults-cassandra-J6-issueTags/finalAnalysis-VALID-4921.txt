Pattern changes caused by commit: effb653450a11abd5e0fdc221f9b2c7a046e829a

From: Decorator-0
To:   Decorator-1

From: Flyweight-5
To:   Flyweight-4

From: Strategy-0
To:   Strategy-1


=========================
       NEW GIT LOG
=========================

This commit refers to file: VALID-4921.txt 

commit effb653450a11abd5e0fdc221f9b2c7a046e829a
Author: Brandon Williams <brandonwilliams@apache.org>

    Return both listen_address and rpc_address through describe_ring.
    Patch by Nick Bailey, reviewed by brandonwilliams for CASSANDRA-3187



==================================
 Issue CASSANDRA-3187 Description 
=======================================

Project: Cassandra
-----------------

-----------------
Title: [CASSANDRA-3187] Return both listen_address and rpc_address through describe_ring
-----------------

-----------------
Summary: Return both listen_address and rpc_address through describe_ring
-----------------

-----------------
Issue type: Bug
-----------------

-----------------
Current status: Resolved
-----------------

-----------------
Created at: Mon, 12 Sep 2011 20:22:10 +0000
-----------------

-----------------
Resolved at: Tue, 13 Sep 2011 18:30:45 +0000
-----------------

-----------------
Assigned to: Nick Bailey
-----------------

-----------------
Description: 

<a href="https://issues.apache.org/jira/browse/CASSANDRA-1777" title="The describe_host
API method is misleading in that it returns the interface associated with gossip traffic"
class="issue-link" data-issue-key="CASSANDRA-1777"><del>CASSANDRA-1777</del></a> changed
describe_ring to return the rpc address associated with a node instead of the
listen_address. This allows using different interfaces for listen_address and rpc_address,
but breaks when rpc_address is set to something like 0.0.0.0.

I think the describe_ring
should just return both interfaces. We can add an optional field to the TokenRange struct
that is 'listen_endpoints' or something similar and populate that with the listen
addresses of nodes.
 

-----------------

-----------------
Comments: 

New Comment: 
Applies to 1.0.0 branch and 0.8 branch 


New Comment: 
Better version of the patch, separate patches for 0.8 and 1.0. 


New Comment: 
The question in my mind is, do we want to "unbreak" 0.8.4/0.8.5, and make "endpoints" the
same as it was in earlier versions (i.e. listen_address) and add a new field for
rpc_address? 


New Comment: 
<blockquote>The question in my mind is, do we want to "unbreak" 0.8.4/0.8.5, and make
"endpoints" the same as it was in earlier versions (i.e. listen_address) and add a new
field for rpc_address?</blockquote>If I could do it all over again, I wouldn't have put <a
href="https://issues.apache.org/jira/browse/CASSANDRA-1777" title="The describe_host API
method is misleading in that it returns the interface associated with gossip traffic"
class="issue-link" data-issue-key="CASSANDRA-1777"><del>CASSANDRA-1777</del></a> in 0.8,
but I think at this point changing it back in a minor is bad and will end up causing a lot
of confusion. 


New Comment: 
Does make it simpler to write a client that works against both latest-0.7 and latest-0.8,
though (for 0.8 &gt;= 0.8.6).Especially if we push 0.8.6 out quickly.  For whatever reason
it seems like many 0.8 deployments haven't moved off of 0.8.1 yet. 


New Comment: 
<blockquote>Especially if we push 0.8.6 out quickly. For whatever reason it seems like
many 0.8 deployments haven't moved off of 0.8.1 yet.</blockquote>True, and now that I
think about I've heard nothing but complaints about <a
href="https://issues.apache.org/jira/browse/CASSANDRA-1777" title="The describe_host API
method is misleading in that it returns the interface associated with gossip traffic"
class="issue-link" data-issue-key="CASSANDRA-1777"><del>CASSANDRA-1777</del></a>, and no
one clamored too hard for it to begin with. 


New Comment: 
Rebased to make the required parameter listen_address again and add an optional
rpc_address. 


New Comment: 
Committed 


