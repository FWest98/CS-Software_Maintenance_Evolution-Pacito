Pattern changes caused by commit: ffbcb4b11b40c52253b02098ca0225b9cf426cd2

From: Decorator-2
To:   Decorator-1

From: Flyweight-2
To:   Flyweight-1

From: Mediator-3
To:   Mediator-1

From: Strategy-0
To:   Strategy-1


=========================
       NEW GIT LOG
=========================

This commit refers to file: VALID-7687.txt 

commit ffbcb4b11b40c52253b02098ca0225b9cf426cd2
Author: Pavel Yaskevich <pyaskevich@twitter.com>

    add a close() method to CRAR to prevent leaking file descriptors
    patch by Pavel Yaskevich; reviewed by Jonathan Ellis for CASSANDRA-4820



==================================
 Issue CASSANDRA-4820 Description 
=======================================

Project: Cassandra
-----------------

-----------------
Title: [CASSANDRA-4820] Add a close() method to CRAR to prevent leaking file descriptors.
-----------------

-----------------
Summary: Add a close() method to CRAR to prevent leaking file descriptors.
-----------------

-----------------
Issue type: Bug
-----------------

-----------------
Current status: Resolved
-----------------

-----------------
Created at: Wed, 17 Oct 2012 01:31:00 +0000
-----------------

-----------------
Resolved at: Wed, 17 Oct 2012 18:08:50 +0000
-----------------

-----------------
Assigned to: Pavel Yaskevich
-----------------

-----------------
Description: 

The problem is that under heavy load Finalizer daemon is unable to keep up with number of
"source" and "channel" fields from CRAR to finalize (as FileInputStream has custom
finalize() which calls close inside) which creates memory/cpu pressure on the machine.
 

-----------------

-----------------
Comments: 

New Comment: 
FIS.close says "If this stream has an associated channel then the channel is closed as
well."  So closing both source and channel is unnecessary. 


New Comment: 
Right, sorry, they share the same fd. Re-attached the patch. 


New Comment: 
+1 


