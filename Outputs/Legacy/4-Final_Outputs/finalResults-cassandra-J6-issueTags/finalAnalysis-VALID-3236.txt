Pattern changes caused by commit: f6b726632c782363c206371938922278c1550664

From: Abstract Factory-3
To:   Abstract Factory-2

From: Factory Method-3
To:   Factory Method-2


=========================
       NEW GIT LOG
=========================

This commit refers to file: VALID-3236.txt 

commit f6b726632c782363c206371938922278c1550664
Author: Brandon Williams <brandonwilliams@apache.org>

    Keep endpoint state until aVeryLongTime when not a fat client
    Patch by brandonwilliams, reviewed by gdusbabek for CASSANDRA-2115



==================================
 Issue CASSANDRA-2115 Description 
=======================================

Project: Cassandra
-----------------

-----------------
Title: [CASSANDRA-2115] Keep endpoint state until aVeryLongTime
-----------------

-----------------
Summary: Keep endpoint state until aVeryLongTime
-----------------

-----------------
Issue type: Improvement
-----------------

-----------------
Current status: Resolved
-----------------

-----------------
Created at: Sat, 5 Feb 2011 22:08:31 +0000
-----------------

-----------------
Resolved at: Thu, 10 Feb 2011 22:35:32 +0000
-----------------

-----------------
Assigned to: Brandon Williams
-----------------

-----------------
Description: 

In <a href="https://issues.apache.org/jira/browse/CASSANDRA-2072" title="Race condition
during decommission" class="issue-link"
data-issue-key="CASSANDRA-2072"><del>CASSANDRA-2072</del></a> we changed the gossiper so
it holds onto endpoint state until QUARANTINE_DELAY has elapsed.  However, if node X is
leaving and node Y goes down and stays down longer than QUARANTINE_DELAY after X has left,
Y will return thinking X is still a member of the cluster.  Instead, let's hold onto the
endpoint state even longer, until aVeryLongTime which is currently set to 3 days. 
 

-----------------

-----------------
Comments: 

New Comment: 
+1 


New Comment: 
Committed. 


New Comment: 
Integrated in Cassandra-0.7 #266 (See <a
href="https://hudson.apache.org/hudson/job/Cassandra-0.7/266/" class="external-link"
rel="nofollow">https://hudson.apache.org/hudson/job/Cassandra-0.7/266/</a>)<br/>    Keep
endpoint state until aVeryLongTime.<br/>Patch by brandonwilliams reviewed by gdusbabek for
<a href="https://issues.apache.org/jira/browse/CASSANDRA-2115" title="Keep endpoint state
until aVeryLongTime" class="issue-link"
data-issue-key="CASSANDRA-2115"><del>CASSANDRA-2115</del></a> 


New Comment: 
Reverted.Though harmless, this makes it impossible to know if a node is a fatclient that
has been removed, and causes repeated log messages for aVeryLongTime. 


New Comment: 
Updated patch holds onto state for aVeryLongTime unless it's a fat client, which gets
removed immediately (but still respects the quarantine.) 


New Comment: 
+1 


New Comment: 
Committed. 


New Comment: 
Integrated in Cassandra-0.7 #277 (See <a
href="https://hudson.apache.org/hudson/job/Cassandra-0.7/277/" class="external-link"
rel="nofollow">https://hudson.apache.org/hudson/job/Cassandra-0.7/277/</a>)<br/>    Keep
endpoint state until aVeryLongTime when not a fat client<br/>Patch by brandonwilliams,
reviewed by gdusbabek for <a href="https://issues.apache.org/jira/browse/CASSANDRA-2115"
title="Keep endpoint state until aVeryLongTime" class="issue-link"
data-issue-key="CASSANDRA-2115"><del>CASSANDRA-2115</del></a> 


