Pattern changes caused by commit: 1e20bf521da3fd3fd5837ea649646f38e14a3440

From: Abstract Factory-3
To:   Abstract Factory-2

From: Factory Method-3
To:   Factory Method-2

From: Mediator-2
To:   Mediator-1


=========================
       NEW GIT LOG
=========================

This commit refers to file: VALID-3798.txt 

commit 1e20bf521da3fd3fd5837ea649646f38e14a3440
Author: Brandon Williams <brandonwilliams@apache.org>

    Remove LoadPushDown methods from pig storage.
    Patch by Jeremy Hanna, reviewed by brandonwilliams for CASSANDRA-2484



==================================
 Issue CASSANDRA-2484 Description 
=======================================

Project: Cassandra
-----------------

-----------------
Title: [CASSANDRA-2484] CassandraStorage LoadPushDown implementation causes heisenbugs
-----------------

-----------------
Summary: CassandraStorage LoadPushDown implementation causes heisenbugs
-----------------

-----------------
Issue type: Bug
-----------------

-----------------
Current status: Resolved
-----------------

-----------------
Created at: Fri, 15 Apr 2011 00:49:02 +0000
-----------------

-----------------
Resolved at: Sun, 17 Apr 2011 21:11:26 +0000
-----------------

-----------------
Assigned to: Jeremy Hanna
-----------------

-----------------
Description: 

After pulling hair out about why weird errors were happening loading data from cassandra
with seemingly irrelevant changes to the pig scripts (mostly changing the script trying to
debug other problems), it looks like the weird errors were because of the implementation
we currently have for LoadPushDaown in CassandraStorage.  Unless there is a good reason to
implement it, I feel like we should just remove the few lines that are in there until we
can spend some serious time doing an implementation of it.
 

-----------------

-----------------
Comments: 

New Comment: 
Removed LoadStoreFunc because it was causing heisenbugs.  Also updated JavaDocs a bit. 


New Comment: 
Can you provide the errors you encountered?  At the least, it seems like
RequiredFieldResponse should essentially be a no-op. 


New Comment: 
What would happen was we would be troubleshooting a bug in a complicated script and if we
took out part of it we would get errors with isEmpty (something we were using but
unrelated at all to the change) and then investigate more and Cassandra wouldn't return
anything at all but only with that particular portion of the script running.  Then someone
else was going through another kind of complicated script and getting odd null pointer
exceptions and traced it back to something similar.  That made us think that pig was
trying to "optimize" or something behind the scenes.  Then we thought it might be trying
to project certain data out of the column family based on the changed script.  That led us
to wonder if it had something to do with the LoadPushDown - since that is called when pig
thinks it can project things out of a data store/file if it doesn't need the rest.  That
would explain some of the odd behavior at least.  We commented out it out like in the
patch and both errors that were independent and unexplainable any other way, were gone.I
know that's kind of a round about way of going about it, but it seems like good evidence
to me that something is up with it - and if it's essentially a no-op, and it works without
it, then I didn't see why we wouldn't just take it out. 


New Comment: 
Committed. 


New Comment: 
Integrated in Cassandra-0.7 #436 (See <a
href="https://hudson.apache.org/hudson/job/Cassandra-0.7/436/" class="external-link"
rel="nofollow">https://hudson.apache.org/hudson/job/Cassandra-0.7/436/</a>)<br/>    Remove
LoadPushDown methods from pig storage.<br/>Patch by Jeremy Hanna, reviewed by
brandonwilliams for <a href="https://issues.apache.org/jira/browse/CASSANDRA-2484"
title="CassandraStorage LoadPushDown implementation causes heisenbugs" class="issue-link"
data-issue-key="CASSANDRA-2484"><del>CASSANDRA-2484</del></a> 


