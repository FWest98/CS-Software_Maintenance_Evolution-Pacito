Pattern changes caused by commit: 24bf5a20ea168e387b9537654b169f1156a32c1b

From: Decorator-1
To:   Decorator-0

From: Mediator-3
To:   Mediator-2


=========================
       NEW GIT LOG
=========================

This commit refers to file: VALID-4650.txt 

commit 24bf5a20ea168e387b9537654b169f1156a32c1b
Author: Pavel Yaskevich <xedin@apache.org>

    Add 'load new SSTables' functionality to JMX and corresponding "refresh" command to the nodetool
    patch by Pavel Yaskevich; reviewed by Brandon Williams for CASSANDRA-2991



==================================
 Issue CASSANDRA-2991 Description 
=======================================

Project: Cassandra
-----------------

-----------------
Title: [CASSANDRA-2991] Add a 'load new sstables' JMX/nodetool command
-----------------

-----------------
Summary: Add a 'load new sstables' JMX/nodetool command
-----------------

-----------------
Issue type: New Feature
-----------------

-----------------
Current status: Resolved
-----------------

-----------------
Created at: Thu, 4 Aug 2011 04:51:06 +0000
-----------------

-----------------
Resolved at: Wed, 17 Aug 2011 11:52:28 +0000
-----------------

-----------------
Assigned to: Pavel Yaskevich
-----------------

-----------------
Description: 

Sometimes people have to create a new cluster to get around a problem and need to copy
sstables around.  It would be convenient to be able to trigger this from nodetool or JMX
instead of doing a restart of the node.
 

-----------------

-----------------
Comments: 

New Comment: 
Wouldn't sstableloader (and the JMX bulkload call) essentially solve this ? 


New Comment: 
Almost.  The catch is you can't use sstableloader from an existing cluster member, so now
you need an intermediate machine to load for you, plus it has to rebuild secondaries. 


New Comment: 
<blockquote>you can't use sstableloader from an existing cluster member</blockquote>Well,
you can using the JMX bulkload call<blockquote>plus it has to rebuild
secondaries</blockquote>True. Though I do admit that I think sstableloader will be simpler
in most case of "moving sstables between clusters", especially if the destination cluster
doesn't have the same number of node/replication factor (as you don't have to think which
sstable should be copied where and avoid both cleanup and repair), and thus wonder if a
'load new sstables' command would be so useful. Another way to put it is that I think a
'load new sstables' command will be more hacky, in that you will have to run it on every
nodes, know which sstable goes where and not forget the cleanup and repair in most case,
so I would be in favor of not adding such hacky command unless it really makes a
difference. 


New Comment: 
What about the "restore snapshot" scenario? 


New Comment: 
Yeah, you're right, it probably still have some use cases. 


New Comment: 
New nodetool command were added - load_new_sstables &lt;keyspace&gt;
&lt;column_family&gt;Rebased with latest cassandra-0.8 branch (last commit
3b198d148546d2cd124a64a42353430ee176559c) 


New Comment: 
I wouldn't use underscore in the name as the other command don't have any <img
class="emoticon" src="https://issues.apache.org/jira/images/icons/emoticons/smile.png"
height="16" width="16" align="absmiddle" alt="" border="0"/> 


New Comment: 
I too would prefer a simpler name for the nodetool command, perhaps just 'refresh' or
'scanfiles'?  I don't want to bikeshed too much here, but I think the command should be
something more concise.  +1 otherwise, however. 


New Comment: 
"refresh" if fine by me, will change before commit. 


New Comment: 
nodetool command changed to "refresh" and committed to cassandra-0.8 branch. 


New Comment: 
Integrated in Cassandra-0.8 #280 (See <a
href="https://builds.apache.org/job/Cassandra-0.8/280/" class="external-link"
rel="nofollow">https://builds.apache.org/job/Cassandra-0.8/280/</a>)<br/>    Add 'load new
SSTables' functionality to JMX and corresponding "refresh" command to the
nodetool<br/>patch by Pavel Yaskevich; reviewed by Brandon Williams for <a
href="https://issues.apache.org/jira/browse/CASSANDRA-2991" title="Add a &#39;load new
sstables&#39; JMX/nodetool command" class="issue-link"
data-issue-key="CASSANDRA-2991"><del>CASSANDRA-2991</del></a>xedin : <a
href="http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;view=rev&amp;rev=1158008"
class="external-link"
rel="nofollow">http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;view=rev&amp;rev=1158008</a><br/>Files
:
<ul>	<li>/cassandra/branches/cassandra-0.8/CHANGES.txt</li>	<li>/cassandra/branches/cassandra-0.8/src/java/org/apache/cassandra/tools/NodeProbe.java</li>	<li>/cassandra/branches/cassandra-0.8/src/java/org/apache/cassandra/service/StorageServiceMBean.java</li>	<li>/cassandra/branches/cassandra-0.8/src/java/org/apache/cassandra/db/ColumnFamilyStoreMBean.java</li>	<li>/cassandra/branches/cassandra-0.8/src/java/org/apache/cassandra/tools/NodeCmd.java</li>	<li>/cassandra/branches/cassandra-0.8/src/java/org/apache/cassandra/db/ColumnFamilyStore.java</li>	<li>/cassandra/branches/cassandra-0.8/src/java/org/apache/cassandra/service/StorageService.java</li></ul> 


New Comment: 
reopening &#8211; does not merge cleanly to trunk.  I'm going to mark the original commit,
r1158008, as merged for now, and just let you commit a new patch to trunk. 


New Comment: 
committed to trunk. 


