Pattern changes caused by commit: 556af0295869fb4abaea596ec641a355d5f9eaa8

From: Decorator-1
To:   Decorator-0

From: Flyweight-4
To:   Flyweight-5

From: Strategy-1
To:   Strategy-0


=========================
       NEW GIT LOG
=========================

This commit refers to file: VALID-5137.txt 

commit 556af0295869fb4abaea596ec641a355d5f9eaa8
Author: Sylvain Lebresne <slebresne@apache.org>

    Fix stress COUNTER_GET options
    patch by slebresne; reviewed by jbellis for CASSANDRA-3301



==================================
 Issue CASSANDRA-3301 Description 
=======================================

Project: Cassandra
-----------------

-----------------
Title: [CASSANDRA-3301] Java Stress Tool:  COUNTER_GET reads from CounterSuper1 instead of SuperCounter1
-----------------

-----------------
Summary: Java Stress Tool:  COUNTER_GET reads from CounterSuper1 instead of SuperCounter1
-----------------

-----------------
Issue type: Bug
-----------------

-----------------
Current status: Resolved
-----------------

-----------------
Created at: Tue, 4 Oct 2011 00:39:18 +0000
-----------------

-----------------
Resolved at: Tue, 4 Oct 2011 14:40:08 +0000
-----------------

-----------------
Assigned to: Sylvain Lebresne
-----------------

-----------------
Description: 

Output from stress tool - COUNTER_ADD works fine bug COUNTER_GET does not
<div
class="code panel" style="border-width: 1px;"><div class="codeContent panelContent"><pre
class="code-java">./stress --operation=COUNTER_ADD --family-type=Super --num-keys=1
--consistency-level=TWO --replication-factor=3 --nodes=cathy1Unable to create stress
keyspace: Keyspace already
exists.total,interval_op_rate,interval_key_rate,avg_latency,elapsed_time1,0,0,0.0060,0END./stress
--operation=COUNTER_GET --family-type=Super --num-keys=1 --consistency-level=QUORUM
--nodes=cathy1total,interval_op_rate,interval_key_rate,avg_latency,elapsed_timeOperation
[0] retried 10 times - error reading counter key 0 ((InvalidRequestException):
unconfigured columnfamily CounterSuper1)0,0,0,NaN,0END</pre></div></div>
The CF created is
called <b>SuperCounter1</b> and not <b>CounterSuper1</b>
<div class="code panel"
style="border-width: 1px;"><div class="codeContent panelContent"><pre class="code-java">
INFO 00:34:21,344 ColumnFamilyStore(table=<span class="code-quote">'Keyspace1'</span>,
columnFamily=<span class="code-quote">'SuperCounter1'</span>) liveRatio is
9.167798032786886 (just-counted was 9.167798032786886).  calculation took 1281ms <span
class="code-keyword">for</span> 9883 columns</pre></div></div> 

-----------------

-----------------
Comments: 

New Comment: 
Workaround is to edit:
tools/stress/src/org/apache/cassandra/stress/operations/CounterGetter.java:<br/>ColumnParent
parent = new ColumnParent("CounterSuper1").setSuper_column(superColumn.getBytes()); 


New Comment: 
Oops, thanks Cathy. Patch attached. 


New Comment: 
+1 


New Comment: 
Integrated in Cassandra-0.8 #359 (See <a
href="https://builds.apache.org/job/Cassandra-0.8/359/" class="external-link"
rel="nofollow">https://builds.apache.org/job/Cassandra-0.8/359/</a>)<br/>    Fix stress
COUNTER_GET options<br/>patch by slebresne; reviewed by jbellis for <a
href="https://issues.apache.org/jira/browse/CASSANDRA-3301" title="Java Stress Tool: 
COUNTER_GET reads from CounterSuper1 instead of SuperCounter1" class="issue-link"
data-issue-key="CASSANDRA-3301"><del>CASSANDRA-3301</del></a>slebresne : <a
href="http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;view=rev&amp;rev=1178785"
class="external-link"
rel="nofollow">http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;view=rev&amp;rev=1178785</a><br/>Files
:
<ul>	<li>/cassandra/branches/cassandra-0.8/CHANGES.txt</li>	<li>/cassandra/branches/cassandra-0.8/tools/stress/src/org/apache/cassandra/stress/operations/CounterGetter.java</li></ul> 


