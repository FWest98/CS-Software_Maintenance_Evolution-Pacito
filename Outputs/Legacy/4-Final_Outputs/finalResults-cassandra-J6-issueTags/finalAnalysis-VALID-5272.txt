Pattern changes caused by commit: 9bfed83ecfa7af3834a716b694a085cce48013e9

From: Decorator-1
To:   Decorator-0

From: Flyweight-4
To:   Flyweight-5

From: Strategy-1
To:   Strategy-0


=========================
       NEW GIT LOG
=========================

This commit refers to file: VALID-5272.txt 

commit 9bfed83ecfa7af3834a716b694a085cce48013e9
Author: Jonathan Ellis <jbellis@apache.org>

    avoid locking on update when no indexes are involved
    patch by jbellis; reviewed by slebrense for CASSANDRA-3386



==================================
 Issue CASSANDRA-3386 Description 
=======================================

Project: Cassandra
-----------------

-----------------
Title: [CASSANDRA-3386] Avoid lock contention in hint rows
-----------------

-----------------
Summary: Avoid lock contention in hint rows
-----------------

-----------------
Issue type: Improvement
-----------------

-----------------
Current status: Resolved
-----------------

-----------------
Created at: Wed, 19 Oct 2011 20:31:09 +0000
-----------------

-----------------
Resolved at: Fri, 21 Oct 2011 04:18:40 +0000
-----------------

-----------------
Assigned to: Jonathan Ellis
-----------------

-----------------
Description: 

As pointed out by Yang in <a href="https://issues.apache.org/jira/browse/CASSANDRA-3385"
title="NPE in hinted handoff" class="issue-link"
data-issue-key="CASSANDRA-3385"><del>CASSANDRA-3385</del></a>, hint writes are keyed by
target IP, to make replay efficient. However, this means that we'll hit a lot of lock
contention in table.apply where we synchronize for potential index updates.
 

-----------------

-----------------
Comments: 

New Comment: 
Patch skips the synchronization when there are no mutated index columns. (I'm 99% sure
that's the only reason we need to lock there...) 


New Comment: 
Looks good to me though I haven't been able to apply the patch cleanly somehow, against
what is it supposed to be ? 


New Comment: 
The 'not applying' part was mine. +1 


New Comment: 
Integrated in Cassandra-0.8 #383 (See <a
href="https://builds.apache.org/job/Cassandra-0.8/383/" class="external-link"
rel="nofollow">https://builds.apache.org/job/Cassandra-0.8/383/</a>)<br/>    avoid locking
on update when no indexes are involved<br/>patch by jbellis; reviewed by slebrense for <a
href="https://issues.apache.org/jira/browse/CASSANDRA-3386" title="Avoid lock contention
in hint rows" class="issue-link"
data-issue-key="CASSANDRA-3386"><del>CASSANDRA-3386</del></a>jbellis : <a
href="http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;view=rev&amp;rev=1186803"
class="external-link"
rel="nofollow">http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;view=rev&amp;rev=1186803</a><br/>Files
:
<ul>	<li>/cassandra/branches/cassandra-0.8/CHANGES.txt</li>	<li>/cassandra/branches/cassandra-0.8/src/java/org/apache/cassandra/db/Table.java</li></ul> 


