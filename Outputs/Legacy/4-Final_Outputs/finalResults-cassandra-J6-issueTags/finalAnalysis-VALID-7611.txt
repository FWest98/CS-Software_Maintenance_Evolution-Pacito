Pattern changes caused by commit: 8264eb21ccb20423ff7bdae0fbef6d88fe2b2529

From: Decorator-2
To:   Decorator-1

From: Flyweight-2
To:   Flyweight-1

From: Mediator-3
To:   Mediator-1

From: Strategy-0
To:   Strategy-1


=========================
       NEW GIT LOG
=========================

This commit refers to file: VALID-7611.txt 

commit 8264eb21ccb20423ff7bdae0fbef6d88fe2b2529
Author: Pavel Yaskevich <xedin@apache.org>

    Add ability to use custom TServerFactory implementations
    patch by Jason Brown; reviewed by Pavel Yaskevich for CASSANDRA-4608



==================================
 Issue CASSANDRA-4608 Description 
=======================================

Project: Cassandra
-----------------

-----------------
Title: [CASSANDRA-4608] Add thrift server factory to CassandraDaemon
-----------------

-----------------
Summary: Add thrift server factory to CassandraDaemon
-----------------

-----------------
Issue type: Sub-task
-----------------

-----------------
Current status: Resolved
-----------------

-----------------
Created at: Tue, 4 Sep 2012 13:39:54 +0000
-----------------

-----------------
Resolved at: Fri, 5 Oct 2012 22:00:02 +0000
-----------------

-----------------
Assigned to: Jason Brown
-----------------

-----------------
Description: 

Add factory class for CassandraServer

Default impl will be the current thrift server
types.
 

-----------------

-----------------
Comments: 

New Comment: 
Add thrift server factory to CassandraDaemon. Created interface IServerFactory (modeled
after TransportFactory) and implemented it in each of the custom TServer implementations
we have (migrated that code out of CassandarDaemon). CD now calls ThriftFactoryHelper for
the TServer instance. Overloaded the constructor for TCustomServerSocket to take a socket
instance; I wanted to make sure we get the better TCP settings from TCustomServerSocket
onto the socket we get from thrift's SSL support. 


New Comment: 
Please see additional comments in <a
href="https://issues.apache.org/jira/browse/CASSANDRA-4662" title="Core support for Thrift
SSL integration" class="issue-link"
data-issue-key="CASSANDRA-4662"><del>CASSANDRA-4662</del></a>. 


New Comment: 
As per discussion with Vijay in <a
href="https://issues.apache.org/jira/browse/CASSANDRA-4662" title="Core support for Thrift
SSL integration" class="issue-link"
data-issue-key="CASSANDRA-4662"><del>CASSANDRA-4662</del></a>, we're going to move out the
SSL thrift integration to the next major release, 1.2. Also, the parent ticket of this
one, <a href="https://issues.apache.org/jira/browse/CASSANDRA-4239" title="Support Thrift
SSL socket" class="issue-link"
data-issue-key="CASSANDRA-4239"><del>CASSANDRA-4239</del></a>, is already tagged 1.2 


New Comment: 
Reworked this patch by removing the dependency of thrift SSL (as per previous comment), so
the thrift server factory aspect can go into c* 1.1. Created a TServerFactory interface,
and it is implemented by the o.a.c.t.CustomT* classes (with a nested Factory class).
Removed the logic of building the TServer from CassandraDaemon to those Factory
implementions.<br/>TServerCustomFactory chooses the correct TServerFactory to use: it
supports the rpc_server_type sync/async/hsha from the yaml, as well as allowing a custom
implementation to be passed in.<br/>Added notes in the yaml for rpc_server_type that you
can pass in a custom TServerFactory class name. 


New Comment: 
rebased 4608_cassandra-1.1.patch and created 4608_cassandra-1.2.patch against trunk. 


New Comment: 
Committed. 


