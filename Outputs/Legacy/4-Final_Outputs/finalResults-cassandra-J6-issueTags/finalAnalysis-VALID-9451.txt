Pattern changes caused by commit: aaf18bd08af50bbaae0954d78d5e6cbb684aded9

From: Strategy-1
To:   Strategy-0


=========================
       NEW GIT LOG
=========================

This commit refers to file: VALID-9451.txt 

commit aaf18bd08af50bbaae0954d78d5e6cbb684aded9
Author: Jonathan Ellis <jbellis@apache.org>

    Fix InputKeyRange in CFIF
    patch by Lanny Ripple and jbellis; reviewed by Alex Liu for CASSANDRA-5536



==================================
 Issue CASSANDRA-5536 Description 
=======================================

Project: Cassandra
-----------------

-----------------
Title: [CASSANDRA-5536] ColumnFamilyInputFormat demands OrderPreservingPartitioner when specifying InputRange with tokens
-----------------

-----------------
Summary: ColumnFamilyInputFormat demands OrderPreservingPartitioner when specifying InputRange with tokens
-----------------

-----------------
Issue type: Bug
-----------------

-----------------
Current status: Resolved
-----------------

-----------------
Created at: Fri, 3 May 2013 19:53:16 +0000
-----------------

-----------------
Resolved at: Mon, 27 May 2013 16:28:12 +0000
-----------------

-----------------
Assigned to: Jonathan Ellis
-----------------

-----------------
Description: 

When ColumnFamilyInputFormat starts getting splits (via getSplits(...) <span
class="error">&#91;ColumnFamilyInputFormat.java:101&#93;</span>) it checks to see if a
`jobKeyRange` has been set.  If it has been set it attempts to set the `jobRange`. 
However the if block (ColumnFamilyInputFormat.java:124) looks to see if the `jobKeyRange`
has tokens but asserts that the OrderPreservingPartitioner must be in use.

This if block
should be looking for keys (not tokens).  Code further down
(ColumnFamilyInputFormat.java:147) already manages the range if tokens are used but can
never be reached.
 

-----------------

-----------------
Comments: 

New Comment: 
Note that the assertion requiring OrderPreservingPartition mentions
"ConfigHelper.setInputKeyRange()" which no longer exists. 


New Comment: 
Suggested changes. 


New Comment: 
Analysis LGTM, v2 attached with a bit more cleanup. 


New Comment: 
Does v2 look good to you, Lanny? 


New Comment: 
WDYT <a href="https://issues.apache.org/jira/secure/ViewProfile.jspa?name=alexliu68"
class="user-hover" rel="alexliu68">Alex Liu</a>? 


New Comment: 
It looks good. 


